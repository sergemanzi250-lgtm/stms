"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/bulk-upload/route";
exports.ids = ["app/api/bulk-upload/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbulk-upload%2Froute&page=%2Fapi%2Fbulk-upload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbulk-upload%2Froute.ts&appDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbulk-upload%2Froute&page=%2Fapi%2Fbulk-upload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbulk-upload%2Froute.ts&appDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var c_Users_TRAINER_1_Desktop_WEB_DEVELOP_AUTOMATIC_SCHOOL_TIMETABLE_MANAGEMENT_SYSTEM_src_app_api_bulk_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/bulk-upload/route.ts */ \"(rsc)/./src/app/api/bulk-upload/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/bulk-upload/route\",\n        pathname: \"/api/bulk-upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/bulk-upload/route\"\n    },\n    resolvedPagePath: \"c:\\\\Users\\\\TRAINER 1\\\\Desktop\\\\WEB DEVELOP\\\\AUTOMATIC SCHOOL TIMETABLE MANAGEMENT SYSTEM\\\\src\\\\app\\\\api\\\\bulk-upload\\\\route.ts\",\n    nextConfigOutput,\n    userland: c_Users_TRAINER_1_Desktop_WEB_DEVELOP_AUTOMATIC_SCHOOL_TIMETABLE_MANAGEMENT_SYSTEM_src_app_api_bulk_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/bulk-upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZidWxrLXVwbG9hZCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYnVsay11cGxvYWQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZidWxrLXVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj1jJTNBJTVDVXNlcnMlNUNUUkFJTkVSJTIwMSU1Q0Rlc2t0b3AlNUNXRUIlMjBERVZFTE9QJTVDQVVUT01BVElDJTIwU0NIT09MJTIwVElNRVRBQkxFJTIwTUFOQUdFTUVOVCUyMFNZU1RFTSU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9YyUzQSU1Q1VzZXJzJTVDVFJBSU5FUiUyMDElNUNEZXNrdG9wJTVDV0VCJTIwREVWRUxPUCU1Q0FVVE9NQVRJQyUyMFNDSE9PTCUyMFRJTUVUQUJMRSUyME1BTkFHRU1FTlQlMjBTWVNURU0maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzhFO0FBQzNKO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Nob29sLXRpbWV0YWJsZS1tYW5hZ2VtZW50Lz9hZDVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcImM6XFxcXFVzZXJzXFxcXFRSQUlORVIgMVxcXFxEZXNrdG9wXFxcXFdFQiBERVZFTE9QXFxcXEFVVE9NQVRJQyBTQ0hPT0wgVElNRVRBQkxFIE1BTkFHRU1FTlQgU1lTVEVNXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGJ1bGstdXBsb2FkXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9idWxrLXVwbG9hZC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2J1bGstdXBsb2FkXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9idWxrLXVwbG9hZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcImM6XFxcXFVzZXJzXFxcXFRSQUlORVIgMVxcXFxEZXNrdG9wXFxcXFdFQiBERVZFTE9QXFxcXEFVVE9NQVRJQyBTQ0hPT0wgVElNRVRBQkxFIE1BTkFHRU1FTlQgU1lTVEVNXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGJ1bGstdXBsb2FkXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9idWxrLXVwbG9hZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbulk-upload%2Froute&page=%2Fapi%2Fbulk-upload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbulk-upload%2Froute.ts&appDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/bulk-upload/route.ts":
/*!******************************************!*\
  !*** ./src/app/api/bulk-upload/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/next */ \"(rsc)/./node_modules/next-auth/next/index.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_3__.PrismaClient();\nasync function POST(request) {\n    try {\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session || session.user.role !== \"SCHOOL_ADMIN\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: \"Access denied. School Admin role required.\"\n            }, {\n                status: 403\n            });\n        }\n        if (!session.user.schoolId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: \"No school assigned to user.\"\n            }, {\n                status: 400\n            });\n        }\n        const formData = await request.formData();\n        const file = formData.get(\"file\");\n        const type = formData.get(\"type\");\n        if (!file || !type) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: \"File and type are required.\"\n            }, {\n                status: 400\n            });\n        }\n        // Read the CSV file\n        const text = await file.text();\n        const lines = text.trim().split(\"\\n\");\n        if (lines.length < 2) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: \"CSV file must contain at least a header row and one data row.\"\n            }, {\n                status: 400\n            });\n        }\n        // Auto-detect separator: comma or tab\n        const firstLine = lines[0];\n        const hasComma = firstLine.includes(\",\");\n        const hasTab = firstLine.includes(\"\t\");\n        let separator = \",\";\n        if (hasTab && !hasComma) {\n            separator = \"\t\";\n        }\n        console.log(`Detected separator: ${separator === \",\" ? \"comma\" : \"tab\"}`);\n        const headers = firstLine.split(separator).map((h)=>h.trim().replace(/\"/g, \"\"));\n        const dataRows = lines.slice(1);\n        let processed = 0;\n        const errors = [];\n        switch(type){\n            case \"subjects\":\n                const subjectResults = await processSubjects(dataRows, headers, session.user.schoolId, errors, separator);\n                processed = subjectResults;\n                break;\n            case \"modules\":\n                const moduleResults = await processModules(dataRows, headers, session.user.schoolId, errors, separator);\n                processed = moduleResults;\n                break;\n            case \"trainer_assignments\":\n                const assignmentResults = await processTrainerAssignments(dataRows, headers, session.user.schoolId, errors, separator);\n                processed = assignmentResults;\n                break;\n            case \"classes\":\n                const classResults = await processClasses(dataRows, headers, session.user.schoolId, errors, separator);\n                processed = classResults;\n                break;\n            case \"teachers\":\n                const schoolName = session.user.schoolName || \"School\";\n                const teacherResults = await processTeachers(dataRows, headers, session.user.schoolId, schoolName, errors, separator);\n                processed = teacherResults;\n                break;\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    message: \"Invalid upload type.\"\n                }, {\n                    status: 400\n                });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: `Successfully processed ${processed} record${processed !== 1 ? \"s\" : \"\"}.`,\n            processed,\n            errors: errors.length > 0 ? errors : undefined\n        });\n    } catch (error) {\n        console.error(\"Bulk upload error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"Internal server error during upload.\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function processSubjects(dataRows, headers, schoolId, errors, separator = \",\") {\n    let processed = 0;\n    console.log(`Processing ${dataRows.length} subject rows for school ${schoolId}`);\n    console.log(\"Subject headers detected:\", headers);\n    console.log(\"Subject data rows:\", dataRows);\n    for(let i = 0; i < dataRows.length; i++){\n        try {\n            const values = parseCSVRow(dataRows[i], separator);\n            const subjectData = {};\n            console.log(`Subject Row ${i + 1} - Raw values:`, values);\n            // Map CSV columns to database fields\n            headers.forEach((header, index)=>{\n                const value = values[index]?.trim();\n                if (value) {\n                    console.log(`Subject Row ${i + 1} - Header \"${header}\" -> Value \"${value}\"`);\n                    switch(header.toLowerCase()){\n                        case \"name\":\n                            subjectData.name = value;\n                            break;\n                        case \"code\":\n                            subjectData.code = value;\n                            break;\n                        case \"level\":\n                            subjectData.level = value;\n                            break;\n                        case \"periods per week\":\n                            subjectData.periodsPerWeek = parseInt(value) || 1;\n                            console.log(`Subject Row ${i + 1} - Parsed periodsPerWeek: ${subjectData.periodsPerWeek}`);\n                            break;\n                        default:\n                            console.log(`Subject Row ${i + 1} - Unknown header: \"${header}\"`);\n                    }\n                }\n            });\n            console.log(`Subject Row ${i + 1} - Subject data object:`, subjectData);\n            // Validate required fields\n            if (!subjectData.name || !subjectData.code || !subjectData.level) {\n                const missing = [];\n                if (!subjectData.name) missing.push(\"name\");\n                if (!subjectData.code) missing.push(\"code\");\n                if (!subjectData.level) missing.push(\"level\");\n                errors.push(`Row ${i + 2}: Missing required fields: ${missing.join(\", \")}`);\n                console.log(`Subject Row ${i + 1} - Validation failed, missing: ${missing.join(\", \")}`);\n                continue;\n            }\n            // Set default values\n            subjectData.periodsPerWeek = subjectData.periodsPerWeek || 1;\n            console.log(`Subject Row ${i + 1} - Subject data with defaults:`, subjectData);\n            // Check for duplicates\n            const existing = await prisma.subject.findFirst({\n                where: {\n                    code: subjectData.code,\n                    schoolId: schoolId\n                }\n            });\n            if (existing) {\n                errors.push(`Row ${i + 2}: Subject with code \"${subjectData.code}\" already exists`);\n                console.log(`Subject Row ${i + 1} - Duplicate found for code: ${subjectData.code}`);\n                continue;\n            }\n            console.log(`Subject Row ${i + 1} - Creating subject with data:`, {\n                name: subjectData.name,\n                code: subjectData.code,\n                level: subjectData.level,\n                periodsPerWeek: subjectData.periodsPerWeek,\n                schoolId: schoolId\n            });\n            // Create subject\n            const created = await prisma.subject.create({\n                data: {\n                    name: subjectData.name,\n                    code: subjectData.code,\n                    level: subjectData.level,\n                    periodsPerWeek: subjectData.periodsPerWeek,\n                    schoolId: schoolId\n                }\n            });\n            console.log(`Subject Row ${i + 1} - Successfully created subject:`, created);\n            processed++;\n        } catch (error) {\n            const errorMsg = error instanceof Error ? error.message : \"Unknown error\";\n            errors.push(`Row ${i + 2}: ${errorMsg}`);\n            console.error(`Subject Row ${i + 1} - Error processing:`, error);\n        }\n    }\n    console.log(`Subject processing complete: ${processed} processed, ${errors.length} errors`);\n    return processed;\n}\nasync function processModules(dataRows, headers, schoolId, errors, separator = \",\") {\n    let processed = 0;\n    console.log(`Processing ${dataRows.length} module rows for school ${schoolId}`);\n    console.log(\"Headers detected:\", headers);\n    console.log(\"Data rows:\", dataRows);\n    for(let i = 0; i < dataRows.length; i++){\n        try {\n            const values = parseCSVRow(dataRows[i], separator);\n            const moduleData = {};\n            console.log(`Row ${i + 1} - Raw values:`, values);\n            // Map CSV columns to database fields\n            headers.forEach((header, index)=>{\n                const value = values[index]?.trim();\n                if (value) {\n                    console.log(`Row ${i + 1} - Header \"${header}\" -> Value \"${value}\"`);\n                    switch(header.toLowerCase()){\n                        case \"name\":\n                            moduleData.name = value;\n                            break;\n                        case \"code\":\n                            moduleData.code = value;\n                            break;\n                        case \"level\":\n                            moduleData.level = value;\n                            break;\n                        case \"trade\":\n                            moduleData.trade = value;\n                            break;\n                        case \"total periods per week\":\n                            moduleData.totalHours = parseInt(value) || 0;\n                            console.log(`Row ${i + 1} - Parsed totalHours: ${moduleData.totalHours}`);\n                            break;\n                        case \"category\":\n                            moduleData.category = value;\n                            break;\n                        default:\n                            console.log(`Row ${i + 1} - Unknown header: \"${header}\"`);\n                    }\n                }\n            });\n            console.log(`Row ${i + 1} - Module data object:`, moduleData);\n            // Validate required fields\n            if (!moduleData.name || !moduleData.code || !moduleData.level || !moduleData.category) {\n                const missing = [];\n                if (!moduleData.name) missing.push(\"name\");\n                if (!moduleData.code) missing.push(\"code\");\n                if (!moduleData.level) missing.push(\"level\");\n                if (!moduleData.category) missing.push(\"category\");\n                errors.push(`Row ${i + 2}: Missing required fields: ${missing.join(\", \")}`);\n                console.log(`Row ${i + 1} - Validation failed, missing: ${missing.join(\", \")}`);\n                continue;\n            }\n            // Set defaults\n            moduleData.totalHours = moduleData.totalHours || 0;\n            moduleData.trade = moduleData.trade || \"General\";\n            moduleData.blockSize = 1 // Default block size to match single form\n            ;\n            console.log(`Row ${i + 1} - Module data with defaults:`, moduleData);\n            // Check for duplicates\n            const existing = await prisma.module.findFirst({\n                where: {\n                    code: moduleData.code,\n                    schoolId: schoolId\n                }\n            });\n            if (existing) {\n                errors.push(`Row ${i + 2}: Module with code \"${moduleData.code}\" already exists`);\n                console.log(`Row ${i + 1} - Duplicate found for code: ${moduleData.code}`);\n                continue;\n            }\n            console.log(`Row ${i + 1} - Creating module with data:`, {\n                ...moduleData,\n                schoolId: schoolId,\n                isActive: true\n            });\n            // Create module\n            const created = await prisma.module.create({\n                data: {\n                    name: moduleData.name,\n                    code: moduleData.code,\n                    level: moduleData.level,\n                    trade: moduleData.trade,\n                    totalHours: moduleData.totalHours,\n                    category: moduleData.category,\n                    blockSize: moduleData.blockSize,\n                    schoolId: schoolId\n                }\n            });\n            console.log(`Row ${i + 1} - Successfully created module:`, created);\n            processed++;\n        } catch (error) {\n            const errorMsg = error instanceof Error ? error.message : \"Unknown error\";\n            errors.push(`Row ${i + 2}: ${errorMsg}`);\n            console.error(`Row ${i + 1} - Error processing:`, error);\n        }\n    }\n    console.log(`Module processing complete: ${processed} processed, ${errors.length} errors`);\n    return processed;\n}\nasync function processTrainerAssignments(dataRows, headers, schoolId, errors, separator = \",\") {\n    let processed = 0;\n    for(let i = 0; i < dataRows.length; i++){\n        try {\n            const values = parseCSVRow(dataRows[i], separator);\n            const assignmentData = {};\n            // Map CSV columns to database fields\n            headers.forEach((header, index)=>{\n                const value = values[index]?.trim();\n                if (value) {\n                    switch(header.toLowerCase()){\n                        case \"trainer email\":\n                            assignmentData.trainerEmail = value;\n                            break;\n                        case \"module code\":\n                            assignmentData.moduleCode = value;\n                            break;\n                        case \"level\":\n                            assignmentData.level = value;\n                            break;\n                        case \"trade\":\n                            assignmentData.trade = value;\n                            break;\n                    }\n                }\n            });\n            // Validate required fields\n            if (!assignmentData.trainerEmail || !assignmentData.moduleCode) {\n                errors.push(`Row ${i + 2}: Missing required fields (trainer email or module code)`);\n                continue;\n            }\n            // Find trainer by email\n            const trainer = await prisma.user.findFirst({\n                where: {\n                    email: assignmentData.trainerEmail,\n                    schoolId: schoolId,\n                    isActive: true,\n                    role: \"TEACHER\"\n                }\n            });\n            if (!trainer) {\n                errors.push(`Row ${i + 2}: Trainer with email \"${assignmentData.trainerEmail}\" not found`);\n                continue;\n            }\n            // Find module by code\n            let moduleFilter = {\n                code: assignmentData.moduleCode,\n                schoolId: schoolId\n            };\n            if (assignmentData.level) {\n                moduleFilter.level = assignmentData.level;\n            }\n            if (assignmentData.trade) {\n                moduleFilter.trade = assignmentData.trade;\n            }\n            const module = await prisma.module.findFirst({\n                where: moduleFilter\n            });\n            if (!module) {\n                errors.push(`Row ${i + 2}: Module with code \"${assignmentData.moduleCode}\" not found`);\n                continue;\n            }\n            // Check if assignment already exists\n            const existing = await prisma.trainerModule.findFirst({\n                where: {\n                    trainerId: trainer.id,\n                    moduleId: module.id\n                }\n            });\n            if (existing) {\n                errors.push(`Row ${i + 2}: Assignment already exists for trainer \"${assignmentData.trainerEmail}\" and module \"${assignmentData.moduleCode}\"`);\n                continue;\n            }\n            // Create assignment\n            await prisma.trainerModule.create({\n                data: {\n                    trainerId: trainer.id,\n                    moduleId: module.id\n                }\n            });\n            processed++;\n        } catch (error) {\n            errors.push(`Row ${i + 2}: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    return processed;\n}\nasync function processClasses(dataRows, headers, schoolId, errors, separator = \",\") {\n    let processed = 0;\n    for(let i = 0; i < dataRows.length; i++){\n        try {\n            const values = parseCSVRow(dataRows[i], separator);\n            const classData = {};\n            // Map CSV columns to database fields\n            headers.forEach((header, index)=>{\n                const value = values[index]?.trim();\n                if (value) {\n                    switch(header.toLowerCase()){\n                        case \"level\":\n                            classData.level = value;\n                            break;\n                        case \"stream\":\n                            classData.stream = value;\n                            break;\n                    }\n                }\n            });\n            // Validate required fields\n            if (!classData.level || !classData.stream) {\n                errors.push(`Row ${i + 2}: Missing required fields (level or stream)`);\n                continue;\n            }\n            // Create class name from level and stream\n            classData.name = `${classData.level}${classData.stream}`;\n            // Check for duplicates\n            const existing = await prisma.class.findFirst({\n                where: {\n                    name: classData.name,\n                    schoolId: schoolId\n                }\n            });\n            if (existing) {\n                errors.push(`Row ${i + 2}: Class with name \"${classData.name}\" already exists`);\n                continue;\n            }\n            // Create class\n            await prisma.class.create({\n                data: {\n                    name: classData.name,\n                    level: classData.level,\n                    stream: classData.stream,\n                    schoolId: schoolId\n                }\n            });\n            processed++;\n        } catch (error) {\n            errors.push(`Row ${i + 2}: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    return processed;\n}\nasync function processTeachers(dataRows, headers, schoolId, schoolName, errors, separator = \",\") {\n    let processed = 0;\n    // Generate default password: {schoolName}@123\n    const defaultPassword = `${schoolName}@123`;\n    for(let i = 0; i < dataRows.length; i++){\n        try {\n            const values = parseCSVRow(dataRows[i], separator);\n            const teacherData = {};\n            // Map CSV columns to database fields\n            headers.forEach((header, index)=>{\n                const value = values[index]?.trim();\n                if (value) {\n                    switch(header.toLowerCase()){\n                        case \"name\":\n                            teacherData.name = value;\n                            break;\n                        case \"email\":\n                            teacherData.email = value;\n                            break;\n                    }\n                }\n            });\n            // Validate required fields\n            if (!teacherData.name || !teacherData.email) {\n                errors.push(`Row ${i + 2}: Missing required fields (name or email)`);\n                continue;\n            }\n            // Check for duplicates by email\n            const existing = await prisma.user.findFirst({\n                where: {\n                    email: teacherData.email,\n                    schoolId: schoolId\n                }\n            });\n            if (existing) {\n                errors.push(`Row ${i + 2}: Teacher with email \"${teacherData.email}\" already exists`);\n                continue;\n            }\n            // Create teacher user account with default password\n            await prisma.user.create({\n                data: {\n                    name: teacherData.name,\n                    email: teacherData.email,\n                    password: defaultPassword,\n                    role: \"TEACHER\",\n                    schoolId: schoolId,\n                    isActive: true\n                }\n            });\n            processed++;\n        } catch (error) {\n            errors.push(`Row ${i + 2}: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    return processed;\n}\nfunction parseCSVRow(row, separator = \",\") {\n    const result = [];\n    let current = \"\";\n    let inQuotes = false;\n    for(let i = 0; i < row.length; i++){\n        const char = row[i];\n        if (char === '\"') {\n            inQuotes = !inQuotes;\n        } else if (char === separator && !inQuotes) {\n            result.push(current);\n            current = \"\";\n        } else {\n            current += char;\n        }\n    }\n    result.push(current);\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9idWxrLXVwbG9hZC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUQ7QUFDTjtBQUNUO0FBQ0s7QUFFN0MsTUFBTUksU0FBUyxJQUFJRCx3REFBWUE7QUFFeEIsZUFBZUUsS0FBS0MsT0FBb0I7SUFDM0MsSUFBSTtRQUNBLE1BQU1DLFVBQVUsTUFBTU4sZ0VBQWdCQSxDQUFDQyxrREFBV0E7UUFFbEQsSUFBSSxDQUFDSyxXQUFXQSxRQUFRQyxJQUFJLENBQUNDLElBQUksS0FBSyxnQkFBZ0I7WUFDbEQsT0FBT1QscURBQVlBLENBQUNVLElBQUksQ0FDcEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLFNBQVM7WUFBNkMsR0FDeEU7Z0JBQUVDLFFBQVE7WUFBSTtRQUV0QjtRQUVBLElBQUksQ0FBQ04sUUFBUUMsSUFBSSxDQUFDTSxRQUFRLEVBQUU7WUFDeEIsT0FBT2QscURBQVlBLENBQUNVLElBQUksQ0FDcEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLFNBQVM7WUFBOEIsR0FDekQ7Z0JBQUVDLFFBQVE7WUFBSTtRQUV0QjtRQUVBLE1BQU1FLFdBQVcsTUFBTVQsUUFBUVMsUUFBUTtRQUN2QyxNQUFNQyxPQUFPRCxTQUFTRSxHQUFHLENBQUM7UUFDMUIsTUFBTUMsT0FBT0gsU0FBU0UsR0FBRyxDQUFDO1FBRTFCLElBQUksQ0FBQ0QsUUFBUSxDQUFDRSxNQUFNO1lBQ2hCLE9BQU9sQixxREFBWUEsQ0FBQ1UsSUFBSSxDQUNwQjtnQkFBRUMsU0FBUztnQkFBT0MsU0FBUztZQUE4QixHQUN6RDtnQkFBRUMsUUFBUTtZQUFJO1FBRXRCO1FBRUEsb0JBQW9CO1FBQ3BCLE1BQU1NLE9BQU8sTUFBTUgsS0FBS0csSUFBSTtRQUM1QixNQUFNQyxRQUFRRCxLQUFLRSxJQUFJLEdBQUdDLEtBQUssQ0FBQztRQUVoQyxJQUFJRixNQUFNRyxNQUFNLEdBQUcsR0FBRztZQUNsQixPQUFPdkIscURBQVlBLENBQUNVLElBQUksQ0FDcEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLFNBQVM7WUFBZ0UsR0FDM0Y7Z0JBQUVDLFFBQVE7WUFBSTtRQUV0QjtRQUVBLHNDQUFzQztRQUN0QyxNQUFNVyxZQUFZSixLQUFLLENBQUMsRUFBRTtRQUMxQixNQUFNSyxXQUFXRCxVQUFVRSxRQUFRLENBQUM7UUFDcEMsTUFBTUMsU0FBU0gsVUFBVUUsUUFBUSxDQUFDO1FBRWxDLElBQUlFLFlBQVk7UUFDaEIsSUFBSUQsVUFBVSxDQUFDRixVQUFVO1lBQ3JCRyxZQUFZO1FBQ2hCO1FBRUFDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLG9CQUFvQixFQUFFRixjQUFjLE1BQU0sVUFBVSxNQUFNLENBQUM7UUFFeEUsTUFBTUcsVUFBVVAsVUFBVUYsS0FBSyxDQUFDTSxXQUFXSSxHQUFHLENBQUNDLENBQUFBLElBQUtBLEVBQUVaLElBQUksR0FBR2EsT0FBTyxDQUFDLE1BQU07UUFDM0UsTUFBTUMsV0FBV2YsTUFBTWdCLEtBQUssQ0FBQztRQUU3QixJQUFJQyxZQUFZO1FBQ2hCLE1BQU1DLFNBQW1CLEVBQUU7UUFFM0IsT0FBUXBCO1lBQ0osS0FBSztnQkFDRCxNQUFNcUIsaUJBQWlCLE1BQU1DLGdCQUFnQkwsVUFBVUosU0FBU3hCLFFBQVFDLElBQUksQ0FBQ00sUUFBUSxFQUFFd0IsUUFBUVY7Z0JBQy9GUyxZQUFZRTtnQkFDWjtZQUVKLEtBQUs7Z0JBQ0QsTUFBTUUsZ0JBQWdCLE1BQU1DLGVBQWVQLFVBQVVKLFNBQVN4QixRQUFRQyxJQUFJLENBQUNNLFFBQVEsRUFBRXdCLFFBQVFWO2dCQUM3RlMsWUFBWUk7Z0JBQ1o7WUFFSixLQUFLO2dCQUNELE1BQU1FLG9CQUFvQixNQUFNQywwQkFBMEJULFVBQVVKLFNBQVN4QixRQUFRQyxJQUFJLENBQUNNLFFBQVEsRUFBRXdCLFFBQVFWO2dCQUM1R1MsWUFBWU07Z0JBQ1o7WUFFSixLQUFLO2dCQUNELE1BQU1FLGVBQWUsTUFBTUMsZUFBZVgsVUFBVUosU0FBU3hCLFFBQVFDLElBQUksQ0FBQ00sUUFBUSxFQUFFd0IsUUFBUVY7Z0JBQzVGUyxZQUFZUTtnQkFDWjtZQUVKLEtBQUs7Z0JBQ0QsTUFBTUUsYUFBYXhDLFFBQVFDLElBQUksQ0FBQ3VDLFVBQVUsSUFBSTtnQkFDOUMsTUFBTUMsaUJBQWlCLE1BQU1DLGdCQUFnQmQsVUFBVUosU0FBU3hCLFFBQVFDLElBQUksQ0FBQ00sUUFBUSxFQUFFaUMsWUFBWVQsUUFBUVY7Z0JBQzNHUyxZQUFZVztnQkFDWjtZQUVKO2dCQUNJLE9BQU9oRCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUNwQjtvQkFBRUMsU0FBUztvQkFBT0MsU0FBUztnQkFBdUIsR0FDbEQ7b0JBQUVDLFFBQVE7Z0JBQUk7UUFFMUI7UUFFQSxPQUFPYixxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQ3JCQyxTQUFTO1lBQ1RDLFNBQVMsQ0FBQyx1QkFBdUIsRUFBRXlCLFVBQVUsT0FBTyxFQUFFQSxjQUFjLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQztZQUNuRkE7WUFDQUMsUUFBUUEsT0FBT2YsTUFBTSxHQUFHLElBQUllLFNBQVNZO1FBQ3pDO0lBRUosRUFBRSxPQUFPQyxPQUFPO1FBQ1p0QixRQUFRc0IsS0FBSyxDQUFDLHNCQUFzQkE7UUFDcEMsT0FBT25ELHFEQUFZQSxDQUFDVSxJQUFJLENBQ3BCO1lBQUVDLFNBQVM7WUFBT0MsU0FBUztRQUF1QyxHQUNsRTtZQUFFQyxRQUFRO1FBQUk7SUFFdEI7QUFDSjtBQUVBLGVBQWUyQixnQkFBZ0JMLFFBQWtCLEVBQUVKLE9BQWlCLEVBQUVqQixRQUFnQixFQUFFd0IsTUFBZ0IsRUFBRVYsWUFBb0IsR0FBRztJQUM3SCxJQUFJUyxZQUFZO0lBQ2hCUixRQUFRQyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUVLLFNBQVNaLE1BQU0sQ0FBQyx5QkFBeUIsRUFBRVQsU0FBUyxDQUFDO0lBQy9FZSxRQUFRQyxHQUFHLENBQUMsNkJBQTZCQztJQUN6Q0YsUUFBUUMsR0FBRyxDQUFDLHNCQUFzQks7SUFFbEMsSUFBSyxJQUFJaUIsSUFBSSxHQUFHQSxJQUFJakIsU0FBU1osTUFBTSxFQUFFNkIsSUFBSztRQUN0QyxJQUFJO1lBQ0EsTUFBTUMsU0FBU0MsWUFBWW5CLFFBQVEsQ0FBQ2lCLEVBQUUsRUFBRXhCO1lBQ3hDLE1BQU0yQixjQUFtQixDQUFDO1lBRTFCMUIsUUFBUUMsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFc0IsSUFBSSxFQUFFLGNBQWMsQ0FBQyxFQUFFQztZQUVsRCxxQ0FBcUM7WUFDckN0QixRQUFReUIsT0FBTyxDQUFDLENBQUNDLFFBQVFDO2dCQUNyQixNQUFNQyxRQUFRTixNQUFNLENBQUNLLE1BQU0sRUFBRXJDO2dCQUM3QixJQUFJc0MsT0FBTztvQkFDUDlCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksRUFBRXNCLElBQUksRUFBRSxXQUFXLEVBQUVLLE9BQU8sWUFBWSxFQUFFRSxNQUFNLENBQUMsQ0FBQztvQkFDM0UsT0FBUUYsT0FBT0csV0FBVzt3QkFDdEIsS0FBSzs0QkFDREwsWUFBWU0sSUFBSSxHQUFHRjs0QkFDbkI7d0JBQ0osS0FBSzs0QkFDREosWUFBWU8sSUFBSSxHQUFHSDs0QkFDbkI7d0JBQ0osS0FBSzs0QkFDREosWUFBWVEsS0FBSyxHQUFHSjs0QkFDcEI7d0JBQ0osS0FBSzs0QkFDREosWUFBWVMsY0FBYyxHQUFHQyxTQUFTTixVQUFVOzRCQUNoRDlCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksRUFBRXNCLElBQUksRUFBRSwwQkFBMEIsRUFBRUcsWUFBWVMsY0FBYyxDQUFDLENBQUM7NEJBQ3pGO3dCQUNKOzRCQUNJbkMsUUFBUUMsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFc0IsSUFBSSxFQUFFLG9CQUFvQixFQUFFSyxPQUFPLENBQUMsQ0FBQztvQkFDeEU7Z0JBQ0o7WUFDSjtZQUVBNUIsUUFBUUMsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFc0IsSUFBSSxFQUFFLHVCQUF1QixDQUFDLEVBQUVHO1lBRTNELDJCQUEyQjtZQUMzQixJQUFJLENBQUNBLFlBQVlNLElBQUksSUFBSSxDQUFDTixZQUFZTyxJQUFJLElBQUksQ0FBQ1AsWUFBWVEsS0FBSyxFQUFFO2dCQUM5RCxNQUFNRyxVQUFVLEVBQUU7Z0JBQ2xCLElBQUksQ0FBQ1gsWUFBWU0sSUFBSSxFQUFFSyxRQUFRQyxJQUFJLENBQUM7Z0JBQ3BDLElBQUksQ0FBQ1osWUFBWU8sSUFBSSxFQUFFSSxRQUFRQyxJQUFJLENBQUM7Z0JBQ3BDLElBQUksQ0FBQ1osWUFBWVEsS0FBSyxFQUFFRyxRQUFRQyxJQUFJLENBQUM7Z0JBQ3JDN0IsT0FBTzZCLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRWYsSUFBSSxFQUFFLDJCQUEyQixFQUFFYyxRQUFRRSxJQUFJLENBQUMsTUFBTSxDQUFDO2dCQUMxRXZDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksRUFBRXNCLElBQUksRUFBRSwrQkFBK0IsRUFBRWMsUUFBUUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztnQkFDdEY7WUFDSjtZQUVBLHFCQUFxQjtZQUNyQmIsWUFBWVMsY0FBYyxHQUFHVCxZQUFZUyxjQUFjLElBQUk7WUFFM0RuQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxZQUFZLEVBQUVzQixJQUFJLEVBQUUsOEJBQThCLENBQUMsRUFBRUc7WUFFbEUsdUJBQXVCO1lBQ3ZCLE1BQU1jLFdBQVcsTUFBTWpFLE9BQU9rRSxPQUFPLENBQUNDLFNBQVMsQ0FBQztnQkFDNUNDLE9BQU87b0JBQ0hWLE1BQU1QLFlBQVlPLElBQUk7b0JBQ3RCaEQsVUFBVUE7Z0JBQ2Q7WUFDSjtZQUVBLElBQUl1RCxVQUFVO2dCQUNWL0IsT0FBTzZCLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRWYsSUFBSSxFQUFFLHFCQUFxQixFQUFFRyxZQUFZTyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7Z0JBQ2xGakMsUUFBUUMsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFc0IsSUFBSSxFQUFFLDZCQUE2QixFQUFFRyxZQUFZTyxJQUFJLENBQUMsQ0FBQztnQkFDbEY7WUFDSjtZQUVBakMsUUFBUUMsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFc0IsSUFBSSxFQUFFLDhCQUE4QixDQUFDLEVBQUU7Z0JBQzlEUyxNQUFNTixZQUFZTSxJQUFJO2dCQUN0QkMsTUFBTVAsWUFBWU8sSUFBSTtnQkFDdEJDLE9BQU9SLFlBQVlRLEtBQUs7Z0JBQ3hCQyxnQkFBZ0JULFlBQVlTLGNBQWM7Z0JBQzFDbEQsVUFBVUE7WUFDZDtZQUVBLGlCQUFpQjtZQUNqQixNQUFNMkQsVUFBVSxNQUFNckUsT0FBT2tFLE9BQU8sQ0FBQ0ksTUFBTSxDQUFDO2dCQUN4Q0MsTUFBTTtvQkFDRmQsTUFBTU4sWUFBWU0sSUFBSTtvQkFDdEJDLE1BQU1QLFlBQVlPLElBQUk7b0JBQ3RCQyxPQUFPUixZQUFZUSxLQUFLO29CQUN4QkMsZ0JBQWdCVCxZQUFZUyxjQUFjO29CQUMxQ2xELFVBQVVBO2dCQUNkO1lBQ0o7WUFFQWUsUUFBUUMsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFc0IsSUFBSSxFQUFFLGdDQUFnQyxDQUFDLEVBQUVxQjtZQUNwRXBDO1FBQ0osRUFBRSxPQUFPYyxPQUFPO1lBQ1osTUFBTXlCLFdBQVd6QixpQkFBaUIwQixRQUFRMUIsTUFBTXZDLE9BQU8sR0FBRztZQUMxRDBCLE9BQU82QixJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUVmLElBQUksRUFBRSxFQUFFLEVBQUV3QixTQUFTLENBQUM7WUFDdkMvQyxRQUFRc0IsS0FBSyxDQUFDLENBQUMsWUFBWSxFQUFFQyxJQUFJLEVBQUUsb0JBQW9CLENBQUMsRUFBRUQ7UUFDOUQ7SUFDSjtJQUVBdEIsUUFBUUMsR0FBRyxDQUFDLENBQUMsNkJBQTZCLEVBQUVPLFVBQVUsWUFBWSxFQUFFQyxPQUFPZixNQUFNLENBQUMsT0FBTyxDQUFDO0lBQzFGLE9BQU9jO0FBQ1g7QUFFQSxlQUFlSyxlQUFlUCxRQUFrQixFQUFFSixPQUFpQixFQUFFakIsUUFBZ0IsRUFBRXdCLE1BQWdCLEVBQUVWLFlBQW9CLEdBQUc7SUFDNUgsSUFBSVMsWUFBWTtJQUNoQlIsUUFBUUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFSyxTQUFTWixNQUFNLENBQUMsd0JBQXdCLEVBQUVULFNBQVMsQ0FBQztJQUM5RWUsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQkM7SUFDakNGLFFBQVFDLEdBQUcsQ0FBQyxjQUFjSztJQUUxQixJQUFLLElBQUlpQixJQUFJLEdBQUdBLElBQUlqQixTQUFTWixNQUFNLEVBQUU2QixJQUFLO1FBQ3RDLElBQUk7WUFDQSxNQUFNQyxTQUFTQyxZQUFZbkIsUUFBUSxDQUFDaUIsRUFBRSxFQUFFeEI7WUFDeEMsTUFBTWtELGFBQWtCLENBQUM7WUFFekJqRCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUVzQixJQUFJLEVBQUUsY0FBYyxDQUFDLEVBQUVDO1lBRTFDLHFDQUFxQztZQUNyQ3RCLFFBQVF5QixPQUFPLENBQUMsQ0FBQ0MsUUFBUUM7Z0JBQ3JCLE1BQU1DLFFBQVFOLE1BQU0sQ0FBQ0ssTUFBTSxFQUFFckM7Z0JBQzdCLElBQUlzQyxPQUFPO29CQUNQOUIsUUFBUUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFc0IsSUFBSSxFQUFFLFdBQVcsRUFBRUssT0FBTyxZQUFZLEVBQUVFLE1BQU0sQ0FBQyxDQUFDO29CQUNuRSxPQUFRRixPQUFPRyxXQUFXO3dCQUN0QixLQUFLOzRCQUNEa0IsV0FBV2pCLElBQUksR0FBR0Y7NEJBQ2xCO3dCQUNKLEtBQUs7NEJBQ0RtQixXQUFXaEIsSUFBSSxHQUFHSDs0QkFDbEI7d0JBQ0osS0FBSzs0QkFDRG1CLFdBQVdmLEtBQUssR0FBR0o7NEJBQ25CO3dCQUNKLEtBQUs7NEJBQ0RtQixXQUFXQyxLQUFLLEdBQUdwQjs0QkFDbkI7d0JBQ0osS0FBSzs0QkFDRG1CLFdBQVdFLFVBQVUsR0FBR2YsU0FBU04sVUFBVTs0QkFDM0M5QixRQUFRQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUVzQixJQUFJLEVBQUUsc0JBQXNCLEVBQUUwQixXQUFXRSxVQUFVLENBQUMsQ0FBQzs0QkFDeEU7d0JBQ0osS0FBSzs0QkFDREYsV0FBV0csUUFBUSxHQUFHdEI7NEJBQ3RCO3dCQUNKOzRCQUNJOUIsUUFBUUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFc0IsSUFBSSxFQUFFLG9CQUFvQixFQUFFSyxPQUFPLENBQUMsQ0FBQztvQkFDaEU7Z0JBQ0o7WUFDSjtZQUVBNUIsUUFBUUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFc0IsSUFBSSxFQUFFLHNCQUFzQixDQUFDLEVBQUUwQjtZQUVsRCwyQkFBMkI7WUFDM0IsSUFBSSxDQUFDQSxXQUFXakIsSUFBSSxJQUFJLENBQUNpQixXQUFXaEIsSUFBSSxJQUFJLENBQUNnQixXQUFXZixLQUFLLElBQUksQ0FBQ2UsV0FBV0csUUFBUSxFQUFFO2dCQUNuRixNQUFNZixVQUFVLEVBQUU7Z0JBQ2xCLElBQUksQ0FBQ1ksV0FBV2pCLElBQUksRUFBRUssUUFBUUMsSUFBSSxDQUFDO2dCQUNuQyxJQUFJLENBQUNXLFdBQVdoQixJQUFJLEVBQUVJLFFBQVFDLElBQUksQ0FBQztnQkFDbkMsSUFBSSxDQUFDVyxXQUFXZixLQUFLLEVBQUVHLFFBQVFDLElBQUksQ0FBQztnQkFDcEMsSUFBSSxDQUFDVyxXQUFXRyxRQUFRLEVBQUVmLFFBQVFDLElBQUksQ0FBQztnQkFDdkM3QixPQUFPNkIsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFZixJQUFJLEVBQUUsMkJBQTJCLEVBQUVjLFFBQVFFLElBQUksQ0FBQyxNQUFNLENBQUM7Z0JBQzFFdkMsUUFBUUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFc0IsSUFBSSxFQUFFLCtCQUErQixFQUFFYyxRQUFRRSxJQUFJLENBQUMsTUFBTSxDQUFDO2dCQUM5RTtZQUNKO1lBRUEsZUFBZTtZQUNmVSxXQUFXRSxVQUFVLEdBQUdGLFdBQVdFLFVBQVUsSUFBSTtZQUNqREYsV0FBV0MsS0FBSyxHQUFHRCxXQUFXQyxLQUFLLElBQUk7WUFDdkNELFdBQVdJLFNBQVMsR0FBRyxFQUFFLDBDQUEwQzs7WUFFbkVyRCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUVzQixJQUFJLEVBQUUsNkJBQTZCLENBQUMsRUFBRTBCO1lBRXpELHVCQUF1QjtZQUN2QixNQUFNVCxXQUFXLE1BQU1qRSxPQUFPK0UsTUFBTSxDQUFDWixTQUFTLENBQUM7Z0JBQzNDQyxPQUFPO29CQUNIVixNQUFNZ0IsV0FBV2hCLElBQUk7b0JBQ3JCaEQsVUFBVUE7Z0JBQ2Q7WUFDSjtZQUVBLElBQUl1RCxVQUFVO2dCQUNWL0IsT0FBTzZCLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRWYsSUFBSSxFQUFFLG9CQUFvQixFQUFFMEIsV0FBV2hCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDaEZqQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUVzQixJQUFJLEVBQUUsNkJBQTZCLEVBQUUwQixXQUFXaEIsSUFBSSxDQUFDLENBQUM7Z0JBQ3pFO1lBQ0o7WUFFQWpDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRXNCLElBQUksRUFBRSw2QkFBNkIsQ0FBQyxFQUFFO2dCQUNyRCxHQUFHMEIsVUFBVTtnQkFDYmhFLFVBQVVBO2dCQUNWc0UsVUFBVTtZQUNkO1lBRUEsZ0JBQWdCO1lBQ2hCLE1BQU1YLFVBQVUsTUFBTXJFLE9BQU8rRSxNQUFNLENBQUNULE1BQU0sQ0FBQztnQkFDdkNDLE1BQU07b0JBQ0ZkLE1BQU1pQixXQUFXakIsSUFBSTtvQkFDckJDLE1BQU1nQixXQUFXaEIsSUFBSTtvQkFDckJDLE9BQU9lLFdBQVdmLEtBQUs7b0JBQ3ZCZ0IsT0FBT0QsV0FBV0MsS0FBSztvQkFDdkJDLFlBQVlGLFdBQVdFLFVBQVU7b0JBQ2pDQyxVQUFVSCxXQUFXRyxRQUFRO29CQUM3QkMsV0FBV0osV0FBV0ksU0FBUztvQkFDL0JwRSxVQUFVQTtnQkFDZDtZQUNKO1lBRUFlLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRXNCLElBQUksRUFBRSwrQkFBK0IsQ0FBQyxFQUFFcUI7WUFDM0RwQztRQUNKLEVBQUUsT0FBT2MsT0FBTztZQUNaLE1BQU15QixXQUFXekIsaUJBQWlCMEIsUUFBUTFCLE1BQU12QyxPQUFPLEdBQUc7WUFDMUQwQixPQUFPNkIsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFZixJQUFJLEVBQUUsRUFBRSxFQUFFd0IsU0FBUyxDQUFDO1lBQ3ZDL0MsUUFBUXNCLEtBQUssQ0FBQyxDQUFDLElBQUksRUFBRUMsSUFBSSxFQUFFLG9CQUFvQixDQUFDLEVBQUVEO1FBQ3REO0lBQ0o7SUFFQXRCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDRCQUE0QixFQUFFTyxVQUFVLFlBQVksRUFBRUMsT0FBT2YsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUN6RixPQUFPYztBQUNYO0FBRUEsZUFBZU8sMEJBQTBCVCxRQUFrQixFQUFFSixPQUFpQixFQUFFakIsUUFBZ0IsRUFBRXdCLE1BQWdCLEVBQUVWLFlBQW9CLEdBQUc7SUFDdkksSUFBSVMsWUFBWTtJQUVoQixJQUFLLElBQUllLElBQUksR0FBR0EsSUFBSWpCLFNBQVNaLE1BQU0sRUFBRTZCLElBQUs7UUFDdEMsSUFBSTtZQUNBLE1BQU1DLFNBQVNDLFlBQVluQixRQUFRLENBQUNpQixFQUFFLEVBQUV4QjtZQUN4QyxNQUFNeUQsaUJBQXNCLENBQUM7WUFFN0IscUNBQXFDO1lBQ3JDdEQsUUFBUXlCLE9BQU8sQ0FBQyxDQUFDQyxRQUFRQztnQkFDckIsTUFBTUMsUUFBUU4sTUFBTSxDQUFDSyxNQUFNLEVBQUVyQztnQkFDN0IsSUFBSXNDLE9BQU87b0JBQ1AsT0FBUUYsT0FBT0csV0FBVzt3QkFDdEIsS0FBSzs0QkFDRHlCLGVBQWVDLFlBQVksR0FBRzNCOzRCQUM5Qjt3QkFDSixLQUFLOzRCQUNEMEIsZUFBZUUsVUFBVSxHQUFHNUI7NEJBQzVCO3dCQUNKLEtBQUs7NEJBQ0QwQixlQUFldEIsS0FBSyxHQUFHSjs0QkFDdkI7d0JBQ0osS0FBSzs0QkFDRDBCLGVBQWVOLEtBQUssR0FBR3BCOzRCQUN2QjtvQkFDUjtnQkFDSjtZQUNKO1lBRUEsMkJBQTJCO1lBQzNCLElBQUksQ0FBQzBCLGVBQWVDLFlBQVksSUFBSSxDQUFDRCxlQUFlRSxVQUFVLEVBQUU7Z0JBQzVEakQsT0FBTzZCLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRWYsSUFBSSxFQUFFLHdEQUF3RCxDQUFDO2dCQUNsRjtZQUNKO1lBRUEsd0JBQXdCO1lBQ3hCLE1BQU1vQyxVQUFVLE1BQU1wRixPQUFPSSxJQUFJLENBQUMrRCxTQUFTLENBQUM7Z0JBQ3hDQyxPQUFPO29CQUNIaUIsT0FBT0osZUFBZUMsWUFBWTtvQkFDbEN4RSxVQUFVQTtvQkFDVnNFLFVBQVU7b0JBQ1YzRSxNQUFNO2dCQUNWO1lBQ0o7WUFFQSxJQUFJLENBQUMrRSxTQUFTO2dCQUNWbEQsT0FBTzZCLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRWYsSUFBSSxFQUFFLHNCQUFzQixFQUFFaUMsZUFBZUMsWUFBWSxDQUFDLFdBQVcsQ0FBQztnQkFDekY7WUFDSjtZQUVBLHNCQUFzQjtZQUN0QixJQUFJSSxlQUFvQjtnQkFDcEI1QixNQUFNdUIsZUFBZUUsVUFBVTtnQkFDL0J6RSxVQUFVQTtZQUNkO1lBRUEsSUFBSXVFLGVBQWV0QixLQUFLLEVBQUU7Z0JBQ3RCMkIsYUFBYTNCLEtBQUssR0FBR3NCLGVBQWV0QixLQUFLO1lBQzdDO1lBRUEsSUFBSXNCLGVBQWVOLEtBQUssRUFBRTtnQkFDdEJXLGFBQWFYLEtBQUssR0FBR00sZUFBZU4sS0FBSztZQUM3QztZQUVBLE1BQU1JLFNBQVMsTUFBTS9FLE9BQU8rRSxNQUFNLENBQUNaLFNBQVMsQ0FBQztnQkFDekNDLE9BQU9rQjtZQUNYO1lBRUEsSUFBSSxDQUFDUCxRQUFRO2dCQUNUN0MsT0FBTzZCLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRWYsSUFBSSxFQUFFLG9CQUFvQixFQUFFaUMsZUFBZUUsVUFBVSxDQUFDLFdBQVcsQ0FBQztnQkFDckY7WUFDSjtZQUVBLHFDQUFxQztZQUNyQyxNQUFNbEIsV0FBVyxNQUFNakUsT0FBT3VGLGFBQWEsQ0FBQ3BCLFNBQVMsQ0FBQztnQkFDbERDLE9BQU87b0JBQ0hvQixXQUFXSixRQUFRSyxFQUFFO29CQUNyQkMsVUFBVVgsT0FBT1UsRUFBRTtnQkFDdkI7WUFDSjtZQUVBLElBQUl4QixVQUFVO2dCQUNWL0IsT0FBTzZCLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRWYsSUFBSSxFQUFFLHlDQUF5QyxFQUFFaUMsZUFBZUMsWUFBWSxDQUFDLGNBQWMsRUFBRUQsZUFBZUUsVUFBVSxDQUFDLENBQUMsQ0FBQztnQkFDNUk7WUFDSjtZQUVBLG9CQUFvQjtZQUNwQixNQUFNbkYsT0FBT3VGLGFBQWEsQ0FBQ2pCLE1BQU0sQ0FBQztnQkFDOUJDLE1BQU07b0JBQ0ZpQixXQUFXSixRQUFRSyxFQUFFO29CQUNyQkMsVUFBVVgsT0FBT1UsRUFBRTtnQkFDdkI7WUFDSjtZQUVBeEQ7UUFDSixFQUFFLE9BQU9jLE9BQU87WUFDWmIsT0FBTzZCLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRWYsSUFBSSxFQUFFLEVBQUUsRUFBRUQsaUJBQWlCMEIsUUFBUTFCLE1BQU12QyxPQUFPLEdBQUcsZ0JBQWdCLENBQUM7UUFDM0Y7SUFDSjtJQUVBLE9BQU95QjtBQUNYO0FBRUEsZUFBZVMsZUFBZVgsUUFBa0IsRUFBRUosT0FBaUIsRUFBRWpCLFFBQWdCLEVBQUV3QixNQUFnQixFQUFFVixZQUFvQixHQUFHO0lBQzVILElBQUlTLFlBQVk7SUFFaEIsSUFBSyxJQUFJZSxJQUFJLEdBQUdBLElBQUlqQixTQUFTWixNQUFNLEVBQUU2QixJQUFLO1FBQ3RDLElBQUk7WUFDQSxNQUFNQyxTQUFTQyxZQUFZbkIsUUFBUSxDQUFDaUIsRUFBRSxFQUFFeEI7WUFDeEMsTUFBTW1FLFlBQWlCLENBQUM7WUFFeEIscUNBQXFDO1lBQ3JDaEUsUUFBUXlCLE9BQU8sQ0FBQyxDQUFDQyxRQUFRQztnQkFDckIsTUFBTUMsUUFBUU4sTUFBTSxDQUFDSyxNQUFNLEVBQUVyQztnQkFDN0IsSUFBSXNDLE9BQU87b0JBQ1AsT0FBUUYsT0FBT0csV0FBVzt3QkFDdEIsS0FBSzs0QkFDRG1DLFVBQVVoQyxLQUFLLEdBQUdKOzRCQUNsQjt3QkFDSixLQUFLOzRCQUNEb0MsVUFBVUMsTUFBTSxHQUFHckM7NEJBQ25CO29CQUNSO2dCQUNKO1lBQ0o7WUFFQSwyQkFBMkI7WUFDM0IsSUFBSSxDQUFDb0MsVUFBVWhDLEtBQUssSUFBSSxDQUFDZ0MsVUFBVUMsTUFBTSxFQUFFO2dCQUN2QzFELE9BQU82QixJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUVmLElBQUksRUFBRSwyQ0FBMkMsQ0FBQztnQkFDckU7WUFDSjtZQUVBLDBDQUEwQztZQUMxQzJDLFVBQVVsQyxJQUFJLEdBQUcsQ0FBQyxFQUFFa0MsVUFBVWhDLEtBQUssQ0FBQyxFQUFFZ0MsVUFBVUMsTUFBTSxDQUFDLENBQUM7WUFFeEQsdUJBQXVCO1lBQ3ZCLE1BQU0zQixXQUFXLE1BQU1qRSxPQUFPNkYsS0FBSyxDQUFDMUIsU0FBUyxDQUFDO2dCQUMxQ0MsT0FBTztvQkFDSFgsTUFBTWtDLFVBQVVsQyxJQUFJO29CQUNwQi9DLFVBQVVBO2dCQUNkO1lBQ0o7WUFFQSxJQUFJdUQsVUFBVTtnQkFDVi9CLE9BQU82QixJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUVmLElBQUksRUFBRSxtQkFBbUIsRUFBRTJDLFVBQVVsQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7Z0JBQzlFO1lBQ0o7WUFFQSxlQUFlO1lBQ2YsTUFBTXpELE9BQU82RixLQUFLLENBQUN2QixNQUFNLENBQUM7Z0JBQ3RCQyxNQUFNO29CQUNGZCxNQUFNa0MsVUFBVWxDLElBQUk7b0JBQ3BCRSxPQUFPZ0MsVUFBVWhDLEtBQUs7b0JBQ3RCaUMsUUFBUUQsVUFBVUMsTUFBTTtvQkFDeEJsRixVQUFVQTtnQkFDZDtZQUNKO1lBRUF1QjtRQUNKLEVBQUUsT0FBT2MsT0FBTztZQUNaYixPQUFPNkIsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFZixJQUFJLEVBQUUsRUFBRSxFQUFFRCxpQkFBaUIwQixRQUFRMUIsTUFBTXZDLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQztRQUMzRjtJQUNKO0lBRUEsT0FBT3lCO0FBQ1g7QUFFQSxlQUFlWSxnQkFBZ0JkLFFBQWtCLEVBQUVKLE9BQWlCLEVBQUVqQixRQUFnQixFQUFFaUMsVUFBa0IsRUFBRVQsTUFBZ0IsRUFBRVYsWUFBb0IsR0FBRztJQUNqSixJQUFJUyxZQUFZO0lBRWhCLDhDQUE4QztJQUM5QyxNQUFNNkQsa0JBQWtCLENBQUMsRUFBRW5ELFdBQVcsSUFBSSxDQUFDO0lBRTNDLElBQUssSUFBSUssSUFBSSxHQUFHQSxJQUFJakIsU0FBU1osTUFBTSxFQUFFNkIsSUFBSztRQUN0QyxJQUFJO1lBQ0EsTUFBTUMsU0FBU0MsWUFBWW5CLFFBQVEsQ0FBQ2lCLEVBQUUsRUFBRXhCO1lBQ3hDLE1BQU11RSxjQUFtQixDQUFDO1lBRTFCLHFDQUFxQztZQUNyQ3BFLFFBQVF5QixPQUFPLENBQUMsQ0FBQ0MsUUFBUUM7Z0JBQ3JCLE1BQU1DLFFBQVFOLE1BQU0sQ0FBQ0ssTUFBTSxFQUFFckM7Z0JBQzdCLElBQUlzQyxPQUFPO29CQUNQLE9BQVFGLE9BQU9HLFdBQVc7d0JBQ3RCLEtBQUs7NEJBQ0R1QyxZQUFZdEMsSUFBSSxHQUFHRjs0QkFDbkI7d0JBQ0osS0FBSzs0QkFDRHdDLFlBQVlWLEtBQUssR0FBRzlCOzRCQUNwQjtvQkFDUjtnQkFDSjtZQUNKO1lBRUEsMkJBQTJCO1lBQzNCLElBQUksQ0FBQ3dDLFlBQVl0QyxJQUFJLElBQUksQ0FBQ3NDLFlBQVlWLEtBQUssRUFBRTtnQkFDekNuRCxPQUFPNkIsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFZixJQUFJLEVBQUUseUNBQXlDLENBQUM7Z0JBQ25FO1lBQ0o7WUFFQSxnQ0FBZ0M7WUFDaEMsTUFBTWlCLFdBQVcsTUFBTWpFLE9BQU9JLElBQUksQ0FBQytELFNBQVMsQ0FBQztnQkFDekNDLE9BQU87b0JBQ0hpQixPQUFPVSxZQUFZVixLQUFLO29CQUN4QjNFLFVBQVVBO2dCQUNkO1lBQ0o7WUFFQSxJQUFJdUQsVUFBVTtnQkFDVi9CLE9BQU82QixJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUVmLElBQUksRUFBRSxzQkFBc0IsRUFBRStDLFlBQVlWLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDcEY7WUFDSjtZQUVBLG9EQUFvRDtZQUNwRCxNQUFNckYsT0FBT0ksSUFBSSxDQUFDa0UsTUFBTSxDQUFDO2dCQUNyQkMsTUFBTTtvQkFDRmQsTUFBTXNDLFlBQVl0QyxJQUFJO29CQUN0QjRCLE9BQU9VLFlBQVlWLEtBQUs7b0JBQ3hCVyxVQUFVRjtvQkFDVnpGLE1BQU07b0JBQ05LLFVBQVVBO29CQUNWc0UsVUFBVTtnQkFDZDtZQUNKO1lBRUEvQztRQUNKLEVBQUUsT0FBT2MsT0FBTztZQUNaYixPQUFPNkIsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFZixJQUFJLEVBQUUsRUFBRSxFQUFFRCxpQkFBaUIwQixRQUFRMUIsTUFBTXZDLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQztRQUMzRjtJQUNKO0lBRUEsT0FBT3lCO0FBQ1g7QUFFQSxTQUFTaUIsWUFBWStDLEdBQVcsRUFBRXpFLFlBQW9CLEdBQUc7SUFDckQsTUFBTTBFLFNBQW1CLEVBQUU7SUFDM0IsSUFBSUMsVUFBVTtJQUNkLElBQUlDLFdBQVc7SUFFZixJQUFLLElBQUlwRCxJQUFJLEdBQUdBLElBQUlpRCxJQUFJOUUsTUFBTSxFQUFFNkIsSUFBSztRQUNqQyxNQUFNcUQsT0FBT0osR0FBRyxDQUFDakQsRUFBRTtRQUVuQixJQUFJcUQsU0FBUyxLQUFLO1lBQ2RELFdBQVcsQ0FBQ0E7UUFDaEIsT0FBTyxJQUFJQyxTQUFTN0UsYUFBYSxDQUFDNEUsVUFBVTtZQUN4Q0YsT0FBT25DLElBQUksQ0FBQ29DO1lBQ1pBLFVBQVU7UUFDZCxPQUFPO1lBQ0hBLFdBQVdFO1FBQ2Y7SUFDSjtJQUVBSCxPQUFPbkMsSUFBSSxDQUFDb0M7SUFDWixPQUFPRDtBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Nob29sLXRpbWV0YWJsZS1tYW5hZ2VtZW50Ly4vc3JjL2FwcC9hcGkvYnVsay11cGxvYWQvcm91dGUudHM/YmE4ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgvbmV4dCdcclxuaW1wb3J0IHsgYXV0aE9wdGlvbnMgfSBmcm9tICdAL2xpYi9hdXRoJ1xyXG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcclxuXHJcbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFzZXNzaW9uIHx8IHNlc3Npb24udXNlci5yb2xlICE9PSAnU0NIT09MX0FETUlOJykge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQWNjZXNzIGRlbmllZC4gU2Nob29sIEFkbWluIHJvbGUgcmVxdWlyZWQuJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBzdGF0dXM6IDQwMyB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc2Vzc2lvbi51c2VyLnNjaG9vbElkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBzY2hvb2wgYXNzaWduZWQgdG8gdXNlci4nIH0sXHJcbiAgICAgICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKClcclxuICAgICAgICBjb25zdCBmaWxlID0gZm9ybURhdGEuZ2V0KCdmaWxlJykgYXMgRmlsZVxyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBmb3JtRGF0YS5nZXQoJ3R5cGUnKSBhcyBzdHJpbmdcclxuXHJcbiAgICAgICAgaWYgKCFmaWxlIHx8ICF0eXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdGaWxlIGFuZCB0eXBlIGFyZSByZXF1aXJlZC4nIH0sXHJcbiAgICAgICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVhZCB0aGUgQ1NWIGZpbGVcclxuICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgZmlsZS50ZXh0KClcclxuICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQudHJpbSgpLnNwbGl0KCdcXG4nKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChsaW5lcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdDU1YgZmlsZSBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgYSBoZWFkZXIgcm93IGFuZCBvbmUgZGF0YSByb3cuJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEF1dG8tZGV0ZWN0IHNlcGFyYXRvcjogY29tbWEgb3IgdGFiXHJcbiAgICAgICAgY29uc3QgZmlyc3RMaW5lID0gbGluZXNbMF1cclxuICAgICAgICBjb25zdCBoYXNDb21tYSA9IGZpcnN0TGluZS5pbmNsdWRlcygnLCcpXHJcbiAgICAgICAgY29uc3QgaGFzVGFiID0gZmlyc3RMaW5lLmluY2x1ZGVzKCdcXHQnKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBzZXBhcmF0b3IgPSAnLCdcclxuICAgICAgICBpZiAoaGFzVGFiICYmICFoYXNDb21tYSkge1xyXG4gICAgICAgICAgICBzZXBhcmF0b3IgPSAnXFx0J1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZyhgRGV0ZWN0ZWQgc2VwYXJhdG9yOiAke3NlcGFyYXRvciA9PT0gJywnID8gJ2NvbW1hJyA6ICd0YWInfWApXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGZpcnN0TGluZS5zcGxpdChzZXBhcmF0b3IpLm1hcChoID0+IGgudHJpbSgpLnJlcGxhY2UoL1wiL2csICcnKSlcclxuICAgICAgICBjb25zdCBkYXRhUm93cyA9IGxpbmVzLnNsaWNlKDEpXHJcblxyXG4gICAgICAgIGxldCBwcm9jZXNzZWQgPSAwXHJcbiAgICAgICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdXHJcblxyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdzdWJqZWN0cyc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJqZWN0UmVzdWx0cyA9IGF3YWl0IHByb2Nlc3NTdWJqZWN0cyhkYXRhUm93cywgaGVhZGVycywgc2Vzc2lvbi51c2VyLnNjaG9vbElkLCBlcnJvcnMsIHNlcGFyYXRvcilcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHN1YmplY3RSZXN1bHRzXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnbW9kdWxlcyc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2R1bGVSZXN1bHRzID0gYXdhaXQgcHJvY2Vzc01vZHVsZXMoZGF0YVJvd3MsIGhlYWRlcnMsIHNlc3Npb24udXNlci5zY2hvb2xJZCwgZXJyb3JzLCBzZXBhcmF0b3IpXHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSBtb2R1bGVSZXN1bHRzXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgY2FzZSAndHJhaW5lcl9hc3NpZ25tZW50cyc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhc3NpZ25tZW50UmVzdWx0cyA9IGF3YWl0IHByb2Nlc3NUcmFpbmVyQXNzaWdubWVudHMoZGF0YVJvd3MsIGhlYWRlcnMsIHNlc3Npb24udXNlci5zY2hvb2xJZCwgZXJyb3JzLCBzZXBhcmF0b3IpXHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSBhc3NpZ25tZW50UmVzdWx0c1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2NsYXNzZXMnOlxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xhc3NSZXN1bHRzID0gYXdhaXQgcHJvY2Vzc0NsYXNzZXMoZGF0YVJvd3MsIGhlYWRlcnMsIHNlc3Npb24udXNlci5zY2hvb2xJZCwgZXJyb3JzLCBzZXBhcmF0b3IpXHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSBjbGFzc1Jlc3VsdHNcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICBjYXNlICd0ZWFjaGVycyc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY2hvb2xOYW1lID0gc2Vzc2lvbi51c2VyLnNjaG9vbE5hbWUgfHwgJ1NjaG9vbCdcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlYWNoZXJSZXN1bHRzID0gYXdhaXQgcHJvY2Vzc1RlYWNoZXJzKGRhdGFSb3dzLCBoZWFkZXJzLCBzZXNzaW9uLnVzZXIuc2Nob29sSWQsIHNjaG9vbE5hbWUsIGVycm9ycywgc2VwYXJhdG9yKVxyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdGVhY2hlclJlc3VsdHNcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdJbnZhbGlkIHVwbG9hZCB0eXBlLicgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgcHJvY2Vzc2VkICR7cHJvY2Vzc2VkfSByZWNvcmQke3Byb2Nlc3NlZCAhPT0gMSA/ICdzJyA6ICcnfS5gLFxyXG4gICAgICAgICAgICBwcm9jZXNzZWQsXHJcbiAgICAgICAgICAgIGVycm9yczogZXJyb3JzLmxlbmd0aCA+IDAgPyBlcnJvcnMgOiB1bmRlZmluZWRcclxuICAgICAgICB9KVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQnVsayB1cGxvYWQgZXJyb3I6JywgZXJyb3IpXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yIGR1cmluZyB1cGxvYWQuJyB9LFxyXG4gICAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICApXHJcbiAgICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NTdWJqZWN0cyhkYXRhUm93czogc3RyaW5nW10sIGhlYWRlcnM6IHN0cmluZ1tdLCBzY2hvb2xJZDogc3RyaW5nLCBlcnJvcnM6IHN0cmluZ1tdLCBzZXBhcmF0b3I6IHN0cmluZyA9ICcsJyk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICBsZXQgcHJvY2Vzc2VkID0gMFxyXG4gICAgY29uc29sZS5sb2coYFByb2Nlc3NpbmcgJHtkYXRhUm93cy5sZW5ndGh9IHN1YmplY3Qgcm93cyBmb3Igc2Nob29sICR7c2Nob29sSWR9YClcclxuICAgIGNvbnNvbGUubG9nKCdTdWJqZWN0IGhlYWRlcnMgZGV0ZWN0ZWQ6JywgaGVhZGVycylcclxuICAgIGNvbnNvbGUubG9nKCdTdWJqZWN0IGRhdGEgcm93czonLCBkYXRhUm93cylcclxuICAgIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhUm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHBhcnNlQ1NWUm93KGRhdGFSb3dzW2ldLCBzZXBhcmF0b3IpXHJcbiAgICAgICAgICAgIGNvbnN0IHN1YmplY3REYXRhOiBhbnkgPSB7fVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFN1YmplY3QgUm93ICR7aSArIDF9IC0gUmF3IHZhbHVlczpgLCB2YWx1ZXMpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNYXAgQ1NWIGNvbHVtbnMgdG8gZGF0YWJhc2UgZmllbGRzXHJcbiAgICAgICAgICAgIGhlYWRlcnMuZm9yRWFjaCgoaGVhZGVyLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB2YWx1ZXNbaW5kZXhdPy50cmltKClcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTdWJqZWN0IFJvdyAke2kgKyAxfSAtIEhlYWRlciBcIiR7aGVhZGVyfVwiIC0+IFZhbHVlIFwiJHt2YWx1ZX1cImApXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChoZWFkZXIudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICduYW1lJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3REYXRhLm5hbWUgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29kZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0RGF0YS5jb2RlID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xldmVsJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3REYXRhLmxldmVsID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BlcmlvZHMgcGVyIHdlZWsnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdERhdGEucGVyaW9kc1BlcldlZWsgPSBwYXJzZUludCh2YWx1ZSkgfHwgMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFN1YmplY3QgUm93ICR7aSArIDF9IC0gUGFyc2VkIHBlcmlvZHNQZXJXZWVrOiAke3N1YmplY3REYXRhLnBlcmlvZHNQZXJXZWVrfWApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFN1YmplY3QgUm93ICR7aSArIDF9IC0gVW5rbm93biBoZWFkZXI6IFwiJHtoZWFkZXJ9XCJgKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTdWJqZWN0IFJvdyAke2kgKyAxfSAtIFN1YmplY3QgZGF0YSBvYmplY3Q6YCwgc3ViamVjdERhdGEpXHJcblxyXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcclxuICAgICAgICAgICAgaWYgKCFzdWJqZWN0RGF0YS5uYW1lIHx8ICFzdWJqZWN0RGF0YS5jb2RlIHx8ICFzdWJqZWN0RGF0YS5sZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWlzc2luZyA9IFtdXHJcbiAgICAgICAgICAgICAgICBpZiAoIXN1YmplY3REYXRhLm5hbWUpIG1pc3NpbmcucHVzaCgnbmFtZScpXHJcbiAgICAgICAgICAgICAgICBpZiAoIXN1YmplY3REYXRhLmNvZGUpIG1pc3NpbmcucHVzaCgnY29kZScpXHJcbiAgICAgICAgICAgICAgICBpZiAoIXN1YmplY3REYXRhLmxldmVsKSBtaXNzaW5nLnB1c2goJ2xldmVsJylcclxuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGBSb3cgJHtpICsgMn06IE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiAke21pc3Npbmcuam9pbignLCAnKX1gKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFN1YmplY3QgUm93ICR7aSArIDF9IC0gVmFsaWRhdGlvbiBmYWlsZWQsIG1pc3Npbmc6ICR7bWlzc2luZy5qb2luKCcsICcpfWApXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgZGVmYXVsdCB2YWx1ZXNcclxuICAgICAgICAgICAgc3ViamVjdERhdGEucGVyaW9kc1BlcldlZWsgPSBzdWJqZWN0RGF0YS5wZXJpb2RzUGVyV2VlayB8fCAxXHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgU3ViamVjdCBSb3cgJHtpICsgMX0gLSBTdWJqZWN0IGRhdGEgd2l0aCBkZWZhdWx0czpgLCBzdWJqZWN0RGF0YSlcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBkdXBsaWNhdGVzXHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgcHJpc21hLnN1YmplY3QuZmluZEZpcnN0KHtcclxuICAgICAgICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogc3ViamVjdERhdGEuY29kZSxcclxuICAgICAgICAgICAgICAgICAgICBzY2hvb2xJZDogc2Nob29sSWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZykge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goYFJvdyAke2kgKyAyfTogU3ViamVjdCB3aXRoIGNvZGUgXCIke3N1YmplY3REYXRhLmNvZGV9XCIgYWxyZWFkeSBleGlzdHNgKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFN1YmplY3QgUm93ICR7aSArIDF9IC0gRHVwbGljYXRlIGZvdW5kIGZvciBjb2RlOiAke3N1YmplY3REYXRhLmNvZGV9YClcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTdWJqZWN0IFJvdyAke2kgKyAxfSAtIENyZWF0aW5nIHN1YmplY3Qgd2l0aCBkYXRhOmAsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHN1YmplY3REYXRhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBjb2RlOiBzdWJqZWN0RGF0YS5jb2RlLFxyXG4gICAgICAgICAgICAgICAgbGV2ZWw6IHN1YmplY3REYXRhLmxldmVsLFxyXG4gICAgICAgICAgICAgICAgcGVyaW9kc1BlcldlZWs6IHN1YmplY3REYXRhLnBlcmlvZHNQZXJXZWVrLFxyXG4gICAgICAgICAgICAgICAgc2Nob29sSWQ6IHNjaG9vbElkXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgc3ViamVjdFxyXG4gICAgICAgICAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgcHJpc21hLnN1YmplY3QuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBzdWJqZWN0RGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IHN1YmplY3REYXRhLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IHN1YmplY3REYXRhLmxldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmlvZHNQZXJXZWVrOiBzdWJqZWN0RGF0YS5wZXJpb2RzUGVyV2VlayxcclxuICAgICAgICAgICAgICAgICAgICBzY2hvb2xJZDogc2Nob29sSWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTdWJqZWN0IFJvdyAke2kgKyAxfSAtIFN1Y2Nlc3NmdWxseSBjcmVhdGVkIHN1YmplY3Q6YCwgY3JlYXRlZClcclxuICAgICAgICAgICAgcHJvY2Vzc2VkKytcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGBSb3cgJHtpICsgMn06ICR7ZXJyb3JNc2d9YClcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgU3ViamVjdCBSb3cgJHtpICsgMX0gLSBFcnJvciBwcm9jZXNzaW5nOmAsIGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coYFN1YmplY3QgcHJvY2Vzc2luZyBjb21wbGV0ZTogJHtwcm9jZXNzZWR9IHByb2Nlc3NlZCwgJHtlcnJvcnMubGVuZ3RofSBlcnJvcnNgKVxyXG4gICAgcmV0dXJuIHByb2Nlc3NlZFxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzTW9kdWxlcyhkYXRhUm93czogc3RyaW5nW10sIGhlYWRlcnM6IHN0cmluZ1tdLCBzY2hvb2xJZDogc3RyaW5nLCBlcnJvcnM6IHN0cmluZ1tdLCBzZXBhcmF0b3I6IHN0cmluZyA9ICcsJyk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICBsZXQgcHJvY2Vzc2VkID0gMFxyXG4gICAgY29uc29sZS5sb2coYFByb2Nlc3NpbmcgJHtkYXRhUm93cy5sZW5ndGh9IG1vZHVsZSByb3dzIGZvciBzY2hvb2wgJHtzY2hvb2xJZH1gKVxyXG4gICAgY29uc29sZS5sb2coJ0hlYWRlcnMgZGV0ZWN0ZWQ6JywgaGVhZGVycylcclxuICAgIGNvbnNvbGUubG9nKCdEYXRhIHJvd3M6JywgZGF0YVJvd3MpXHJcbiAgICBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YVJvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBwYXJzZUNTVlJvdyhkYXRhUm93c1tpXSwgc2VwYXJhdG9yKVxyXG4gICAgICAgICAgICBjb25zdCBtb2R1bGVEYXRhOiBhbnkgPSB7fVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFJvdyAke2kgKyAxfSAtIFJhdyB2YWx1ZXM6YCwgdmFsdWVzKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTWFwIENTViBjb2x1bW5zIHRvIGRhdGFiYXNlIGZpZWxkc1xyXG4gICAgICAgICAgICBoZWFkZXJzLmZvckVhY2goKGhlYWRlciwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2luZGV4XT8udHJpbSgpXHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUm93ICR7aSArIDF9IC0gSGVhZGVyIFwiJHtoZWFkZXJ9XCIgLT4gVmFsdWUgXCIke3ZhbHVlfVwiYClcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGhlYWRlci50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25hbWUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlRGF0YS5uYW1lID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvZGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlRGF0YS5jb2RlID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xldmVsJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZURhdGEubGV2ZWwgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHJhZGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlRGF0YS50cmFkZSA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0b3RhbCBwZXJpb2RzIHBlciB3ZWVrJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZURhdGEudG90YWxIb3VycyA9IHBhcnNlSW50KHZhbHVlKSB8fCAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUm93ICR7aSArIDF9IC0gUGFyc2VkIHRvdGFsSG91cnM6ICR7bW9kdWxlRGF0YS50b3RhbEhvdXJzfWApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjYXRlZ29yeSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVEYXRhLmNhdGVnb3J5ID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUm93ICR7aSArIDF9IC0gVW5rbm93biBoZWFkZXI6IFwiJHtoZWFkZXJ9XCJgKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSb3cgJHtpICsgMX0gLSBNb2R1bGUgZGF0YSBvYmplY3Q6YCwgbW9kdWxlRGF0YSlcclxuXHJcbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xyXG4gICAgICAgICAgICBpZiAoIW1vZHVsZURhdGEubmFtZSB8fCAhbW9kdWxlRGF0YS5jb2RlIHx8ICFtb2R1bGVEYXRhLmxldmVsIHx8ICFtb2R1bGVEYXRhLmNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaXNzaW5nID0gW11cclxuICAgICAgICAgICAgICAgIGlmICghbW9kdWxlRGF0YS5uYW1lKSBtaXNzaW5nLnB1c2goJ25hbWUnKVxyXG4gICAgICAgICAgICAgICAgaWYgKCFtb2R1bGVEYXRhLmNvZGUpIG1pc3NpbmcucHVzaCgnY29kZScpXHJcbiAgICAgICAgICAgICAgICBpZiAoIW1vZHVsZURhdGEubGV2ZWwpIG1pc3NpbmcucHVzaCgnbGV2ZWwnKVxyXG4gICAgICAgICAgICAgICAgaWYgKCFtb2R1bGVEYXRhLmNhdGVnb3J5KSBtaXNzaW5nLnB1c2goJ2NhdGVnb3J5JylcclxuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGBSb3cgJHtpICsgMn06IE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiAke21pc3Npbmcuam9pbignLCAnKX1gKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFJvdyAke2kgKyAxfSAtIFZhbGlkYXRpb24gZmFpbGVkLCBtaXNzaW5nOiAke21pc3Npbmcuam9pbignLCAnKX1gKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU2V0IGRlZmF1bHRzXHJcbiAgICAgICAgICAgIG1vZHVsZURhdGEudG90YWxIb3VycyA9IG1vZHVsZURhdGEudG90YWxIb3VycyB8fCAwXHJcbiAgICAgICAgICAgIG1vZHVsZURhdGEudHJhZGUgPSBtb2R1bGVEYXRhLnRyYWRlIHx8ICdHZW5lcmFsJ1xyXG4gICAgICAgICAgICBtb2R1bGVEYXRhLmJsb2NrU2l6ZSA9IDEgLy8gRGVmYXVsdCBibG9jayBzaXplIHRvIG1hdGNoIHNpbmdsZSBmb3JtXHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUm93ICR7aSArIDF9IC0gTW9kdWxlIGRhdGEgd2l0aCBkZWZhdWx0czpgLCBtb2R1bGVEYXRhKVxyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGR1cGxpY2F0ZXNcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEubW9kdWxlLmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IG1vZHVsZURhdGEuY29kZSxcclxuICAgICAgICAgICAgICAgICAgICBzY2hvb2xJZDogc2Nob29sSWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZykge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goYFJvdyAke2kgKyAyfTogTW9kdWxlIHdpdGggY29kZSBcIiR7bW9kdWxlRGF0YS5jb2RlfVwiIGFscmVhZHkgZXhpc3RzYClcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSb3cgJHtpICsgMX0gLSBEdXBsaWNhdGUgZm91bmQgZm9yIGNvZGU6ICR7bW9kdWxlRGF0YS5jb2RlfWApXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUm93ICR7aSArIDF9IC0gQ3JlYXRpbmcgbW9kdWxlIHdpdGggZGF0YTpgLCB7XHJcbiAgICAgICAgICAgICAgICAuLi5tb2R1bGVEYXRhLFxyXG4gICAgICAgICAgICAgICAgc2Nob29sSWQ6IHNjaG9vbElkLFxyXG4gICAgICAgICAgICAgICAgaXNBY3RpdmU6IHRydWVcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBtb2R1bGVcclxuICAgICAgICAgICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHByaXNtYS5tb2R1bGUuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBtb2R1bGVEYXRhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogbW9kdWxlRGF0YS5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxldmVsOiBtb2R1bGVEYXRhLmxldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYWRlOiBtb2R1bGVEYXRhLnRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsSG91cnM6IG1vZHVsZURhdGEudG90YWxIb3VycyxcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogbW9kdWxlRGF0YS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBibG9ja1NpemU6IG1vZHVsZURhdGEuYmxvY2tTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjaG9vbElkOiBzY2hvb2xJZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFJvdyAke2kgKyAxfSAtIFN1Y2Nlc3NmdWxseSBjcmVhdGVkIG1vZHVsZTpgLCBjcmVhdGVkKVxyXG4gICAgICAgICAgICBwcm9jZXNzZWQrK1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goYFJvdyAke2kgKyAyfTogJHtlcnJvck1zZ31gKVxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBSb3cgJHtpICsgMX0gLSBFcnJvciBwcm9jZXNzaW5nOmAsIGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coYE1vZHVsZSBwcm9jZXNzaW5nIGNvbXBsZXRlOiAke3Byb2Nlc3NlZH0gcHJvY2Vzc2VkLCAke2Vycm9ycy5sZW5ndGh9IGVycm9yc2ApXHJcbiAgICByZXR1cm4gcHJvY2Vzc2VkXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NUcmFpbmVyQXNzaWdubWVudHMoZGF0YVJvd3M6IHN0cmluZ1tdLCBoZWFkZXJzOiBzdHJpbmdbXSwgc2Nob29sSWQ6IHN0cmluZywgZXJyb3JzOiBzdHJpbmdbXSwgc2VwYXJhdG9yOiBzdHJpbmcgPSAnLCcpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgbGV0IHByb2Nlc3NlZCA9IDBcclxuICAgIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhUm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHBhcnNlQ1NWUm93KGRhdGFSb3dzW2ldLCBzZXBhcmF0b3IpXHJcbiAgICAgICAgICAgIGNvbnN0IGFzc2lnbm1lbnREYXRhOiBhbnkgPSB7fVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTWFwIENTViBjb2x1bW5zIHRvIGRhdGFiYXNlIGZpZWxkc1xyXG4gICAgICAgICAgICBoZWFkZXJzLmZvckVhY2goKGhlYWRlciwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2luZGV4XT8udHJpbSgpXHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGhlYWRlci50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RyYWluZXIgZW1haWwnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudERhdGEudHJhaW5lckVtYWlsID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ21vZHVsZSBjb2RlJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnREYXRhLm1vZHVsZUNvZGUgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGV2ZWwnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudERhdGEubGV2ZWwgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHJhZGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudERhdGEudHJhZGUgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcclxuICAgICAgICAgICAgaWYgKCFhc3NpZ25tZW50RGF0YS50cmFpbmVyRW1haWwgfHwgIWFzc2lnbm1lbnREYXRhLm1vZHVsZUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGBSb3cgJHtpICsgMn06IE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzICh0cmFpbmVyIGVtYWlsIG9yIG1vZHVsZSBjb2RlKWApXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBGaW5kIHRyYWluZXIgYnkgZW1haWxcclxuICAgICAgICAgICAgY29uc3QgdHJhaW5lciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBhc3NpZ25tZW50RGF0YS50cmFpbmVyRW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nob29sSWQ6IHNjaG9vbElkLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdURUFDSEVSJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0cmFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChgUm93ICR7aSArIDJ9OiBUcmFpbmVyIHdpdGggZW1haWwgXCIke2Fzc2lnbm1lbnREYXRhLnRyYWluZXJFbWFpbH1cIiBub3QgZm91bmRgKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRmluZCBtb2R1bGUgYnkgY29kZVxyXG4gICAgICAgICAgICBsZXQgbW9kdWxlRmlsdGVyOiBhbnkgPSB7XHJcbiAgICAgICAgICAgICAgICBjb2RlOiBhc3NpZ25tZW50RGF0YS5tb2R1bGVDb2RlLFxyXG4gICAgICAgICAgICAgICAgc2Nob29sSWQ6IHNjaG9vbElkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChhc3NpZ25tZW50RGF0YS5sZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgbW9kdWxlRmlsdGVyLmxldmVsID0gYXNzaWdubWVudERhdGEubGV2ZWxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGFzc2lnbm1lbnREYXRhLnRyYWRlKSB7XHJcbiAgICAgICAgICAgICAgICBtb2R1bGVGaWx0ZXIudHJhZGUgPSBhc3NpZ25tZW50RGF0YS50cmFkZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2R1bGUgPSBhd2FpdCBwcmlzbWEubW9kdWxlLmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZTogbW9kdWxlRmlsdGVyXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBpZiAoIW1vZHVsZSkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goYFJvdyAke2kgKyAyfTogTW9kdWxlIHdpdGggY29kZSBcIiR7YXNzaWdubWVudERhdGEubW9kdWxlQ29kZX1cIiBub3QgZm91bmRgKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYXNzaWdubWVudCBhbHJlYWR5IGV4aXN0c1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS50cmFpbmVyTW9kdWxlLmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYWluZXJJZDogdHJhaW5lci5pZCxcclxuICAgICAgICAgICAgICAgICAgICBtb2R1bGVJZDogbW9kdWxlLmlkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcclxuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGBSb3cgJHtpICsgMn06IEFzc2lnbm1lbnQgYWxyZWFkeSBleGlzdHMgZm9yIHRyYWluZXIgXCIke2Fzc2lnbm1lbnREYXRhLnRyYWluZXJFbWFpbH1cIiBhbmQgbW9kdWxlIFwiJHthc3NpZ25tZW50RGF0YS5tb2R1bGVDb2RlfVwiYClcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhc3NpZ25tZW50XHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS50cmFpbmVyTW9kdWxlLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhaW5lcklkOiB0cmFpbmVyLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZUlkOiBtb2R1bGUuaWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHByb2Nlc3NlZCsrXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goYFJvdyAke2kgKyAyfTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHByb2Nlc3NlZFxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzQ2xhc3NlcyhkYXRhUm93czogc3RyaW5nW10sIGhlYWRlcnM6IHN0cmluZ1tdLCBzY2hvb2xJZDogc3RyaW5nLCBlcnJvcnM6IHN0cmluZ1tdLCBzZXBhcmF0b3I6IHN0cmluZyA9ICcsJyk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICBsZXQgcHJvY2Vzc2VkID0gMFxyXG4gICAgXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFSb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gcGFyc2VDU1ZSb3coZGF0YVJvd3NbaV0sIHNlcGFyYXRvcilcclxuICAgICAgICAgICAgY29uc3QgY2xhc3NEYXRhOiBhbnkgPSB7fVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTWFwIENTViBjb2x1bW5zIHRvIGRhdGFiYXNlIGZpZWxkc1xyXG4gICAgICAgICAgICBoZWFkZXJzLmZvckVhY2goKGhlYWRlciwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2luZGV4XT8udHJpbSgpXHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGhlYWRlci50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xldmVsJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzRGF0YS5sZXZlbCA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzdHJlYW0nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NEYXRhLnN0cmVhbSA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xyXG4gICAgICAgICAgICBpZiAoIWNsYXNzRGF0YS5sZXZlbCB8fCAhY2xhc3NEYXRhLnN0cmVhbSkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goYFJvdyAke2kgKyAyfTogTWlzc2luZyByZXF1aXJlZCBmaWVsZHMgKGxldmVsIG9yIHN0cmVhbSlgKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGNsYXNzIG5hbWUgZnJvbSBsZXZlbCBhbmQgc3RyZWFtXHJcbiAgICAgICAgICAgIGNsYXNzRGF0YS5uYW1lID0gYCR7Y2xhc3NEYXRhLmxldmVsfSR7Y2xhc3NEYXRhLnN0cmVhbX1gXHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgZHVwbGljYXRlc1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS5jbGFzcy5maW5kRmlyc3Qoe1xyXG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjbGFzc0RhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzY2hvb2xJZDogc2Nob29sSWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZykge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goYFJvdyAke2kgKyAyfTogQ2xhc3Mgd2l0aCBuYW1lIFwiJHtjbGFzc0RhdGEubmFtZX1cIiBhbHJlYWR5IGV4aXN0c2ApXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgY2xhc3NcclxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLmNsYXNzLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogY2xhc3NEYXRhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IGNsYXNzRGF0YS5sZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJlYW06IGNsYXNzRGF0YS5zdHJlYW0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nob29sSWQ6IHNjaG9vbElkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBwcm9jZXNzZWQrK1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGBSb3cgJHtpICsgMn06ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBwcm9jZXNzZWRcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1RlYWNoZXJzKGRhdGFSb3dzOiBzdHJpbmdbXSwgaGVhZGVyczogc3RyaW5nW10sIHNjaG9vbElkOiBzdHJpbmcsIHNjaG9vbE5hbWU6IHN0cmluZywgZXJyb3JzOiBzdHJpbmdbXSwgc2VwYXJhdG9yOiBzdHJpbmcgPSAnLCcpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgbGV0IHByb2Nlc3NlZCA9IDBcclxuICAgIFxyXG4gICAgLy8gR2VuZXJhdGUgZGVmYXVsdCBwYXNzd29yZDoge3NjaG9vbE5hbWV9QDEyM1xyXG4gICAgY29uc3QgZGVmYXVsdFBhc3N3b3JkID0gYCR7c2Nob29sTmFtZX1AMTIzYFxyXG4gICAgXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFSb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gcGFyc2VDU1ZSb3coZGF0YVJvd3NbaV0sIHNlcGFyYXRvcilcclxuICAgICAgICAgICAgY29uc3QgdGVhY2hlckRhdGE6IGFueSA9IHt9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBNYXAgQ1NWIGNvbHVtbnMgdG8gZGF0YWJhc2UgZmllbGRzXHJcbiAgICAgICAgICAgIGhlYWRlcnMuZm9yRWFjaCgoaGVhZGVyLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB2YWx1ZXNbaW5kZXhdPy50cmltKClcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoaGVhZGVyLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmFtZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZWFjaGVyRGF0YS5uYW1lID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VtYWlsJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlYWNoZXJEYXRhLmVtYWlsID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXHJcbiAgICAgICAgICAgIGlmICghdGVhY2hlckRhdGEubmFtZSB8fCAhdGVhY2hlckRhdGEuZW1haWwpIHtcclxuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGBSb3cgJHtpICsgMn06IE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzIChuYW1lIG9yIGVtYWlsKWApXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgZHVwbGljYXRlcyBieSBlbWFpbFxyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0ZWFjaGVyRGF0YS5lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBzY2hvb2xJZDogc2Nob29sSWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZykge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goYFJvdyAke2kgKyAyfTogVGVhY2hlciB3aXRoIGVtYWlsIFwiJHt0ZWFjaGVyRGF0YS5lbWFpbH1cIiBhbHJlYWR5IGV4aXN0c2ApXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGVhY2hlciB1c2VyIGFjY291bnQgd2l0aCBkZWZhdWx0IHBhc3N3b3JkXHJcbiAgICAgICAgICAgIGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGVhY2hlckRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGVhY2hlckRhdGEuZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGRlZmF1bHRQYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICAgICByb2xlOiAnVEVBQ0hFUicsXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nob29sSWQ6IHNjaG9vbElkLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBwcm9jZXNzZWQrK1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGBSb3cgJHtpICsgMn06ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBwcm9jZXNzZWRcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VDU1ZSb3cocm93OiBzdHJpbmcsIHNlcGFyYXRvcjogc3RyaW5nID0gJywnKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdXHJcbiAgICBsZXQgY3VycmVudCA9ICcnXHJcbiAgICBsZXQgaW5RdW90ZXMgPSBmYWxzZVxyXG4gICAgXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvdy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGNoYXIgPSByb3dbaV1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoY2hhciA9PT0gJ1wiJykge1xyXG4gICAgICAgICAgICBpblF1b3RlcyA9ICFpblF1b3Rlc1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PT0gc2VwYXJhdG9yICYmICFpblF1b3Rlcykge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChjdXJyZW50KVxyXG4gICAgICAgICAgICBjdXJyZW50ID0gJydcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50ICs9IGNoYXJcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJlc3VsdC5wdXNoKGN1cnJlbnQpXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwiUHJpc21hQ2xpZW50IiwicHJpc21hIiwiUE9TVCIsInJlcXVlc3QiLCJzZXNzaW9uIiwidXNlciIsInJvbGUiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzY2hvb2xJZCIsImZvcm1EYXRhIiwiZmlsZSIsImdldCIsInR5cGUiLCJ0ZXh0IiwibGluZXMiLCJ0cmltIiwic3BsaXQiLCJsZW5ndGgiLCJmaXJzdExpbmUiLCJoYXNDb21tYSIsImluY2x1ZGVzIiwiaGFzVGFiIiwic2VwYXJhdG9yIiwiY29uc29sZSIsImxvZyIsImhlYWRlcnMiLCJtYXAiLCJoIiwicmVwbGFjZSIsImRhdGFSb3dzIiwic2xpY2UiLCJwcm9jZXNzZWQiLCJlcnJvcnMiLCJzdWJqZWN0UmVzdWx0cyIsInByb2Nlc3NTdWJqZWN0cyIsIm1vZHVsZVJlc3VsdHMiLCJwcm9jZXNzTW9kdWxlcyIsImFzc2lnbm1lbnRSZXN1bHRzIiwicHJvY2Vzc1RyYWluZXJBc3NpZ25tZW50cyIsImNsYXNzUmVzdWx0cyIsInByb2Nlc3NDbGFzc2VzIiwic2Nob29sTmFtZSIsInRlYWNoZXJSZXN1bHRzIiwicHJvY2Vzc1RlYWNoZXJzIiwidW5kZWZpbmVkIiwiZXJyb3IiLCJpIiwidmFsdWVzIiwicGFyc2VDU1ZSb3ciLCJzdWJqZWN0RGF0YSIsImZvckVhY2giLCJoZWFkZXIiLCJpbmRleCIsInZhbHVlIiwidG9Mb3dlckNhc2UiLCJuYW1lIiwiY29kZSIsImxldmVsIiwicGVyaW9kc1BlcldlZWsiLCJwYXJzZUludCIsIm1pc3NpbmciLCJwdXNoIiwiam9pbiIsImV4aXN0aW5nIiwic3ViamVjdCIsImZpbmRGaXJzdCIsIndoZXJlIiwiY3JlYXRlZCIsImNyZWF0ZSIsImRhdGEiLCJlcnJvck1zZyIsIkVycm9yIiwibW9kdWxlRGF0YSIsInRyYWRlIiwidG90YWxIb3VycyIsImNhdGVnb3J5IiwiYmxvY2tTaXplIiwibW9kdWxlIiwiaXNBY3RpdmUiLCJhc3NpZ25tZW50RGF0YSIsInRyYWluZXJFbWFpbCIsIm1vZHVsZUNvZGUiLCJ0cmFpbmVyIiwiZW1haWwiLCJtb2R1bGVGaWx0ZXIiLCJ0cmFpbmVyTW9kdWxlIiwidHJhaW5lcklkIiwiaWQiLCJtb2R1bGVJZCIsImNsYXNzRGF0YSIsInN0cmVhbSIsImNsYXNzIiwiZGVmYXVsdFBhc3N3b3JkIiwidGVhY2hlckRhdGEiLCJwYXNzd29yZCIsInJvdyIsInJlc3VsdCIsImN1cnJlbnQiLCJpblF1b3RlcyIsImNoYXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/bulk-upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// @ts-ignore - Temporarily bypassing type checking for auth configuration\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            // @ts-ignore\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                const user = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    },\n                    include: {\n                        school: true\n                    }\n                });\n                if (!user || !user.isActive) {\n                    return null;\n                }\n                const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().compare(credentials.password, user.password);\n                if (!isPasswordValid) {\n                    return null;\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    role: user.role,\n                    schoolId: user.schoolId,\n                    schoolName: user.school?.name || \"\",\n                    teachingStreams: user.teachingStreams,\n                    maxWeeklyHours: user.maxWeeklyHours\n                };\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\"\n    },\n    callbacks: {\n        // @ts-ignore\n        async jwt ({ token, user }) {\n            if (user) {\n                token.role = user.role;\n                token.schoolId = user.schoolId;\n                token.schoolName = user.schoolName;\n                token.teachingStreams = user.teachingStreams;\n                token.maxWeeklyHours = user.maxWeeklyHours;\n            }\n            return token;\n        },\n        // @ts-ignore\n        async session ({ session, token }) {\n            if (token) {\n                session.user.id = token.sub;\n                session.user.role = token.role;\n                session.user.schoolId = token.schoolId;\n                session.user.schoolName = token.schoolName;\n                // @ts-ignore\n                session.user.teachingStreams = token.teachingStreams;\n                // @ts-ignore\n                session.user.maxWeeklyHours = token.maxWeeklyHours;\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDaUU7QUFDcEM7QUFDQTtBQUU3QiwwRUFBMEU7QUFDbkUsTUFBTUcsY0FBK0I7SUFDMUNDLFdBQVc7UUFDVEosMkVBQW1CQSxDQUFDO1lBQ2xCSyxNQUFNO1lBQ05DLGFBQWE7Z0JBQ1hDLE9BQU87b0JBQUVDLE9BQU87b0JBQVNDLE1BQU07Z0JBQVE7Z0JBQ3ZDQyxVQUFVO29CQUFFRixPQUFPO29CQUFZQyxNQUFNO2dCQUFXO1lBQ2xEO1lBQ0EsYUFBYTtZQUNiLE1BQU1FLFdBQVVMLFdBQVc7Z0JBQ3pCLElBQUksQ0FBQ0EsYUFBYUMsU0FBUyxDQUFDRCxhQUFhSSxVQUFVO29CQUNqRCxPQUFPO2dCQUNUO2dCQUVBLE1BQU1FLE9BQU8sTUFBTVgsdUNBQUVBLENBQUNXLElBQUksQ0FBQ0MsVUFBVSxDQUFDO29CQUNsQ0MsT0FBTzt3QkFDSFAsT0FBT0QsWUFBWUMsS0FBSztvQkFDNUI7b0JBQ0FRLFNBQVM7d0JBQ0xDLFFBQVE7b0JBQ1o7Z0JBQ0o7Z0JBRUEsSUFBSSxDQUFDSixRQUFRLENBQUNBLEtBQUtLLFFBQVEsRUFBRTtvQkFDekIsT0FBTztnQkFDWDtnQkFFQSxNQUFNQyxrQkFBa0IsTUFBTWhCLHVEQUFjLENBQzFDSSxZQUFZSSxRQUFRLEVBQ3BCRSxLQUFLRixRQUFRO2dCQUdmLElBQUksQ0FBQ1EsaUJBQWlCO29CQUNwQixPQUFPO2dCQUNUO2dCQUVBLE9BQU87b0JBQ0xFLElBQUlSLEtBQUtRLEVBQUU7b0JBQ1hiLE9BQU9LLEtBQUtMLEtBQUs7b0JBQ2pCRixNQUFNTyxLQUFLUCxJQUFJO29CQUNmZ0IsTUFBTVQsS0FBS1MsSUFBSTtvQkFDZkMsVUFBVVYsS0FBS1UsUUFBUTtvQkFDdkJDLFlBQVlYLEtBQUtJLE1BQU0sRUFBRVgsUUFBUTtvQkFDakNtQixpQkFBaUJaLEtBQUtZLGVBQWU7b0JBQ3JDQyxnQkFBZ0JiLEtBQUthLGNBQWM7Z0JBQ3JDO1lBQ0Y7UUFDRjtLQUNEO0lBQ0RDLFNBQVM7UUFDUEMsVUFBVTtJQUNaO0lBQ0FDLFdBQVc7UUFDVCxhQUFhO1FBQ2IsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVsQixJQUFJLEVBQUU7WUFDdkIsSUFBSUEsTUFBTTtnQkFDUmtCLE1BQU1ULElBQUksR0FBR1QsS0FBS1MsSUFBSTtnQkFDdEJTLE1BQU1SLFFBQVEsR0FBR1YsS0FBS1UsUUFBUTtnQkFDOUJRLE1BQU1QLFVBQVUsR0FBR1gsS0FBS1csVUFBVTtnQkFDbENPLE1BQU1OLGVBQWUsR0FBR1osS0FBS1ksZUFBZTtnQkFDNUNNLE1BQU1MLGNBQWMsR0FBR2IsS0FBS2EsY0FBYztZQUM1QztZQUNBLE9BQU9LO1FBQ1Q7UUFDQSxhQUFhO1FBQ2IsTUFBTUosU0FBUSxFQUFFQSxPQUFPLEVBQUVJLEtBQUssRUFBRTtZQUM5QixJQUFJQSxPQUFPO2dCQUNUSixRQUFRZCxJQUFJLENBQUNRLEVBQUUsR0FBR1UsTUFBTUMsR0FBRztnQkFDM0JMLFFBQVFkLElBQUksQ0FBQ1MsSUFBSSxHQUFHUyxNQUFNVCxJQUFJO2dCQUM5QkssUUFBUWQsSUFBSSxDQUFDVSxRQUFRLEdBQUdRLE1BQU1SLFFBQVE7Z0JBQ3RDSSxRQUFRZCxJQUFJLENBQUNXLFVBQVUsR0FBR08sTUFBTVAsVUFBVTtnQkFDMUMsYUFBYTtnQkFDYkcsUUFBUWQsSUFBSSxDQUFDWSxlQUFlLEdBQUdNLE1BQU1OLGVBQWU7Z0JBQ3BELGFBQWE7Z0JBQ2JFLFFBQVFkLElBQUksQ0FBQ2EsY0FBYyxHQUFHSyxNQUFNTCxjQUFjO1lBQ3BEO1lBQ0EsT0FBT0M7UUFDVDtJQUNGO0lBQ0FNLE9BQU87UUFDTEMsUUFBUTtJQUNWO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NjaG9vbC10aW1ldGFibGUtbWFuYWdlbWVudC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gJ25leHQtYXV0aCdcclxuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscydcclxuaW1wb3J0IHsgZGIgfSBmcm9tICdAL2xpYi9kYidcclxuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcydcclxuXHJcbi8vIEB0cy1pZ25vcmUgLSBUZW1wb3JhcmlseSBieXBhc3NpbmcgdHlwZSBjaGVja2luZyBmb3IgYXV0aCBjb25maWd1cmF0aW9uXHJcbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XHJcbiAgICAgIG5hbWU6ICdjcmVkZW50aWFscycsXHJcbiAgICAgIGNyZWRlbnRpYWxzOiB7XHJcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6ICdFbWFpbCcsIHR5cGU6ICdlbWFpbCcgfSxcclxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogJ1Bhc3N3b3JkJywgdHlwZTogJ3Bhc3N3b3JkJyB9XHJcbiAgICAgIH0sXHJcbiAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uZW1haWwgfHwgIWNyZWRlbnRpYWxzPy5wYXNzd29yZCkge1xyXG4gICAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgICAgICAgIHNjaG9vbDogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKCF1c2VyIHx8ICF1c2VyLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShcclxuICAgICAgICAgIGNyZWRlbnRpYWxzLnBhc3N3b3JkLFxyXG4gICAgICAgICAgdXNlci5wYXNzd29yZFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpIHtcclxuICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcclxuICAgICAgICAgIHNjaG9vbElkOiB1c2VyLnNjaG9vbElkLFxyXG4gICAgICAgICAgc2Nob29sTmFtZTogdXNlci5zY2hvb2w/Lm5hbWUgfHwgJycsXHJcbiAgICAgICAgICB0ZWFjaGluZ1N0cmVhbXM6IHVzZXIudGVhY2hpbmdTdHJlYW1zLFxyXG4gICAgICAgICAgbWF4V2Vla2x5SG91cnM6IHVzZXIubWF4V2Vla2x5SG91cnNcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgXSxcclxuICBzZXNzaW9uOiB7XHJcbiAgICBzdHJhdGVneTogJ2p3dCdcclxuICB9LFxyXG4gIGNhbGxiYWNrczoge1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xyXG4gICAgICBpZiAodXNlcikge1xyXG4gICAgICAgIHRva2VuLnJvbGUgPSB1c2VyLnJvbGVcclxuICAgICAgICB0b2tlbi5zY2hvb2xJZCA9IHVzZXIuc2Nob29sSWRcclxuICAgICAgICB0b2tlbi5zY2hvb2xOYW1lID0gdXNlci5zY2hvb2xOYW1lXHJcbiAgICAgICAgdG9rZW4udGVhY2hpbmdTdHJlYW1zID0gdXNlci50ZWFjaGluZ1N0cmVhbXNcclxuICAgICAgICB0b2tlbi5tYXhXZWVrbHlIb3VycyA9IHVzZXIubWF4V2Vla2x5SG91cnNcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdG9rZW5cclxuICAgIH0sXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xyXG4gICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5zdWIhXHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSB0b2tlbi5yb2xlXHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLnNjaG9vbElkID0gdG9rZW4uc2Nob29sSWRcclxuICAgICAgICBzZXNzaW9uLnVzZXIuc2Nob29sTmFtZSA9IHRva2VuLnNjaG9vbE5hbWVcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLnRlYWNoaW5nU3RyZWFtcyA9IHRva2VuLnRlYWNoaW5nU3RyZWFtc1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBzZXNzaW9uLnVzZXIubWF4V2Vla2x5SG91cnMgPSB0b2tlbi5tYXhXZWVrbHlIb3Vyc1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZXNzaW9uXHJcbiAgICB9XHJcbiAgfSxcclxuICBwYWdlczoge1xyXG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJ1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiZGIiLCJiY3J5cHQiLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaW5jbHVkZSIsInNjaG9vbCIsImlzQWN0aXZlIiwiaXNQYXNzd29yZFZhbGlkIiwiY29tcGFyZSIsImlkIiwicm9sZSIsInNjaG9vbElkIiwic2Nob29sTmFtZSIsInRlYWNoaW5nU3RyZWFtcyIsIm1heFdlZWtseUhvdXJzIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwiY2FsbGJhY2tzIiwiand0IiwidG9rZW4iLCJzdWIiLCJwYWdlcyIsInNpZ25JbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst db = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = db;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLEtBQUtGLGdCQUFnQkcsTUFBTSxJQUFJLElBQUlKLHdEQUFZQSxHQUFFO0FBRTlELElBQUlLLElBQXlCLEVBQWNKLGdCQUFnQkcsTUFBTSxHQUFHRCIsInNvdXJjZXMiOlsid2VicGFjazovL3NjaG9vbC10aW1ldGFibGUtbWFuYWdlbWVudC8uL3NyYy9saWIvZGIudHM/OWU0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcclxuXHJcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XHJcbiAgICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGIgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKVxyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBkYiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwiZGIiLCJwcmlzbWEiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/bcryptjs","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbulk-upload%2Froute&page=%2Fapi%2Fbulk-upload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbulk-upload%2Froute.ts&appDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();