"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/teacher/statistics/route";
exports.ids = ["app/api/teacher/statistics/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fteacher%2Fstatistics%2Froute&page=%2Fapi%2Fteacher%2Fstatistics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fteacher%2Fstatistics%2Froute.ts&appDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fteacher%2Fstatistics%2Froute&page=%2Fapi%2Fteacher%2Fstatistics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fteacher%2Fstatistics%2Froute.ts&appDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var c_Users_TRAINER_1_Desktop_WEB_DEVELOP_AUTOMATIC_SCHOOL_TIMETABLE_MANAGEMENT_SYSTEM_src_app_api_teacher_statistics_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/teacher/statistics/route.ts */ \"(rsc)/./src/app/api/teacher/statistics/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/teacher/statistics/route\",\n        pathname: \"/api/teacher/statistics\",\n        filename: \"route\",\n        bundlePath: \"app/api/teacher/statistics/route\"\n    },\n    resolvedPagePath: \"c:\\\\Users\\\\TRAINER 1\\\\Desktop\\\\WEB DEVELOP\\\\AUTOMATIC SCHOOL TIMETABLE MANAGEMENT SYSTEM\\\\src\\\\app\\\\api\\\\teacher\\\\statistics\\\\route.ts\",\n    nextConfigOutput,\n    userland: c_Users_TRAINER_1_Desktop_WEB_DEVELOP_AUTOMATIC_SCHOOL_TIMETABLE_MANAGEMENT_SYSTEM_src_app_api_teacher_statistics_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/teacher/statistics/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0ZWFjaGVyJTJGc3RhdGlzdGljcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdGVhY2hlciUyRnN0YXRpc3RpY3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ0ZWFjaGVyJTJGc3RhdGlzdGljcyUyRnJvdXRlLnRzJmFwcERpcj1jJTNBJTVDVXNlcnMlNUNUUkFJTkVSJTIwMSU1Q0Rlc2t0b3AlNUNXRUIlMjBERVZFTE9QJTVDQVVUT01BVElDJTIwU0NIT09MJTIwVElNRVRBQkxFJTIwTUFOQUdFTUVOVCUyMFNZU1RFTSU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9YyUzQSU1Q1VzZXJzJTVDVFJBSU5FUiUyMDElNUNEZXNrdG9wJTVDV0VCJTIwREVWRUxPUCU1Q0FVVE9NQVRJQyUyMFNDSE9PTCUyMFRJTUVUQUJMRSUyME1BTkFHRU1FTlQlMjBTWVNURU0maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3NGO0FBQ25LO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Nob29sLXRpbWV0YWJsZS1tYW5hZ2VtZW50Lz84ZDA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcImM6XFxcXFVzZXJzXFxcXFRSQUlORVIgMVxcXFxEZXNrdG9wXFxcXFdFQiBERVZFTE9QXFxcXEFVVE9NQVRJQyBTQ0hPT0wgVElNRVRBQkxFIE1BTkFHRU1FTlQgU1lTVEVNXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHRlYWNoZXJcXFxcc3RhdGlzdGljc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdGVhY2hlci9zdGF0aXN0aWNzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdGVhY2hlci9zdGF0aXN0aWNzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS90ZWFjaGVyL3N0YXRpc3RpY3Mvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJjOlxcXFxVc2Vyc1xcXFxUUkFJTkVSIDFcXFxcRGVza3RvcFxcXFxXRUIgREVWRUxPUFxcXFxBVVRPTUFUSUMgU0NIT09MIFRJTUVUQUJMRSBNQU5BR0VNRU5UIFNZU1RFTVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFx0ZWFjaGVyXFxcXHN0YXRpc3RpY3NcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3RlYWNoZXIvc3RhdGlzdGljcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fteacher%2Fstatistics%2Froute&page=%2Fapi%2Fteacher%2Fstatistics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fteacher%2Fstatistics%2Froute.ts&appDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/teacher/statistics/route.ts":
/*!*************************************************!*\
  !*** ./src/app/api/teacher/statistics/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n\n\n\n\nasync function GET(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session || session.user.role !== \"TEACHER\" && session.user.role !== \"TRAINER\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized - Teacher/Trainer role required\"\n            }, {\n                status: 401\n            });\n        }\n        // Get teacher ID from session or query parameter\n        const { searchParams } = new URL(request.url);\n        const teacherId = searchParams.get(\"teacherId\") || session.user.id;\n        // Ensure teachers can only access their own statistics unless they're admin\n        if (session.user.role === \"TEACHER\" || session.user.role === \"TRAINER\") {\n            if (teacherId !== session.user.id) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Unauthorized - Can only access your own statistics\"\n                }, {\n                    status: 403\n                });\n            }\n        }\n        // Get current date info\n        const now = new Date();\n        const currentDay = now.toLocaleDateString(\"en-US\", {\n            weekday: \"long\"\n        }).toUpperCase();\n        // Get timetables for statistics\n        const timetables = await _lib_db__WEBPACK_IMPORTED_MODULE_3__.db.timetable.findMany({\n            where: {\n                teacherId: teacherId,\n                schoolId: session.user.schoolId || \"\"\n            },\n            include: {\n                timeSlot: {\n                    select: {\n                        day: true,\n                        period: true,\n                        isBreak: true\n                    }\n                },\n                class: {\n                    select: {\n                        name: true\n                    }\n                }\n            }\n        });\n        // Calculate timetable statistics\n        const totalLessons = timetables.length;\n        const teachingLessons = timetables.filter((t)=>!t.timeSlot.isBreak).length;\n        const breaks = timetables.filter((t)=>t.timeSlot.isBreak).length;\n        const uniqueDays = new Set(timetables.map((t)=>t.timeSlot.day)).size;\n        const uniqueClasses = new Set(timetables.map((t)=>t.classId)).size;\n        const maxPeriod = Math.max(...timetables.map((t)=>t.timeSlot.period), 0);\n        // Today's lessons\n        const todayLessons = timetables.filter((t)=>t.timeSlot.day === currentDay && !t.timeSlot.isBreak);\n        // Weekly lesson distribution\n        const dayOrder = [\n            \"MONDAY\",\n            \"TUESDAY\",\n            \"WEDNESDAY\",\n            \"THURSDAY\",\n            \"FRIDAY\",\n            \"SATURDAY\"\n        ];\n        const lessonsPerDay = dayOrder.map((day)=>({\n                day,\n                count: timetables.filter((t)=>t.timeSlot.day === day && !t.timeSlot.isBreak).length\n            }));\n        // Get assignment statistics\n        const subjectAssignments = await _lib_db__WEBPACK_IMPORTED_MODULE_3__.db.teacherSubject.count({\n            where: {\n                teacherId: teacherId,\n                teacher: {\n                    schoolId: session.user.schoolId || \"\"\n                }\n            }\n        });\n        const moduleAssignments = await _lib_db__WEBPACK_IMPORTED_MODULE_3__.db.trainerModule.count({\n            where: {\n                trainerId: teacherId,\n                trainer: {\n                    schoolId: session.user.schoolId || \"\"\n                }\n            }\n        });\n        const classSubjectAssignments = await _lib_db__WEBPACK_IMPORTED_MODULE_3__.db.teacherClassSubject.count({\n            where: {\n                teacherId: teacherId,\n                schoolId: session.user.schoolId || \"\"\n            }\n        });\n        const classModuleAssignments = await _lib_db__WEBPACK_IMPORTED_MODULE_3__.db.trainerClassModule.count({\n            where: {\n                trainerId: teacherId,\n                schoolId: session.user.schoolId || \"\"\n            }\n        });\n        // Calculate workload metrics\n        const averageLessonsPerDay = uniqueDays > 0 ? Math.round(teachingLessons / uniqueDays * 10) / 10 : 0;\n        const totalAssignments = subjectAssignments + moduleAssignments;\n        const totalClassAssignments = classSubjectAssignments + classModuleAssignments;\n        // Get teacher's availability settings\n        const teacher = await _lib_db__WEBPACK_IMPORTED_MODULE_3__.db.user.findUnique({\n            where: {\n                id: teacherId\n            },\n            select: {\n                maxWeeklyHours: true,\n                unavailableDays: true,\n                unavailablePeriods: true,\n                teachingStreams: true\n            }\n        });\n        // Calculate utilization percentage\n        const maxHours = teacher?.maxWeeklyHours || 40;\n        const estimatedHours = Math.round(teachingLessons * 0.75 * 10) / 10 // Assuming ~45 min per lesson\n        ;\n        const utilizationPercentage = maxHours > 0 ? Math.round(estimatedHours / maxHours * 100) : 0;\n        // Get recent activity (last 5 timetables created/updated)\n        const recentTimetables = await _lib_db__WEBPACK_IMPORTED_MODULE_3__.db.timetable.findMany({\n            where: {\n                teacherId: teacherId,\n                schoolId: session.user.schoolId || \"\"\n            },\n            orderBy: {\n                updatedAt: \"desc\"\n            },\n            take: 5,\n            select: {\n                id: true,\n                updatedAt: true,\n                class: {\n                    select: {\n                        name: true\n                    }\n                },\n                timeSlot: {\n                    select: {\n                        day: true,\n                        period: true\n                    }\n                }\n            }\n        });\n        const statistics = {\n            // Timetable Statistics\n            totalLessons,\n            teachingLessons,\n            breaks,\n            uniqueDays,\n            uniqueClasses,\n            maxPeriod,\n            todayLessons: todayLessons.length,\n            averageLessonsPerDay,\n            utilizationPercentage,\n            // Assignment Statistics\n            subjectAssignments,\n            moduleAssignments,\n            totalAssignments,\n            classSubjectAssignments,\n            classModuleAssignments,\n            totalClassAssignments,\n            // Workload Information\n            maxWeeklyHours: teacher?.maxWeeklyHours || 40,\n            estimatedWeeklyHours: estimatedHours,\n            teachingStreams: teacher?.teachingStreams || \"PRIMARY\",\n            // Distribution Data\n            lessonsPerDay,\n            recentActivity: recentTimetables.map((t)=>({\n                    id: t.id,\n                    className: t.class.name,\n                    day: t.timeSlot.day,\n                    period: t.timeSlot.period,\n                    updatedAt: t.updatedAt\n                })),\n            // Availability Information\n            unavailableDays: teacher?.unavailableDays ? JSON.parse(teacher.unavailableDays) : [],\n            unavailablePeriods: teacher?.unavailablePeriods ? JSON.parse(teacher.unavailablePeriods) : []\n        };\n        // Generate summary for dashboard\n        const summary = {\n            status: utilizationPercentage < 70 ? \"Light Load\" : utilizationPercentage > 90 ? \"Heavy Load\" : \"Balanced\",\n            weeklyGoal: `${estimatedHours}/${maxHours} hours`,\n            nextClass: todayLessons.length > 0 ? `Today: ${todayLessons.length} lessons` : \"No classes today\",\n            assignments: `${totalAssignments} subjects/modules, ${totalClassAssignments} class assignments`\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            statistics,\n            summary,\n            lastUpdated: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"Teacher statistics fetch error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS90ZWFjaGVyL3N0YXRpc3RpY3Mvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXVEO0FBQ1g7QUFDSjtBQUNYO0FBRXRCLGVBQWVJLElBQUlDLE9BQW9CO0lBQzFDLElBQUk7UUFDQSxNQUFNQyxVQUFVLE1BQU1MLDJEQUFnQkEsQ0FBQ0Msa0RBQVdBO1FBRWxELElBQUksQ0FBQ0ksV0FBWUEsUUFBUUMsSUFBSSxDQUFDQyxJQUFJLEtBQUssYUFBYUYsUUFBUUMsSUFBSSxDQUFDQyxJQUFJLEtBQUssV0FBWTtZQUNsRixPQUFPUixxREFBWUEsQ0FBQ1MsSUFBSSxDQUNwQjtnQkFBRUMsT0FBTztZQUErQyxHQUN4RDtnQkFBRUMsUUFBUTtZQUFJO1FBRXRCO1FBRUEsaURBQWlEO1FBQ2pELE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSVIsUUFBUVMsR0FBRztRQUM1QyxNQUFNQyxZQUFZSCxhQUFhSSxHQUFHLENBQUMsZ0JBQWdCVixRQUFRQyxJQUFJLENBQUNVLEVBQUU7UUFFbEUsNEVBQTRFO1FBQzVFLElBQUlYLFFBQVFDLElBQUksQ0FBQ0MsSUFBSSxLQUFLLGFBQWFGLFFBQVFDLElBQUksQ0FBQ0MsSUFBSSxLQUFLLFdBQVc7WUFDcEUsSUFBSU8sY0FBY1QsUUFBUUMsSUFBSSxDQUFDVSxFQUFFLEVBQUU7Z0JBQy9CLE9BQU9qQixxREFBWUEsQ0FBQ1MsSUFBSSxDQUNwQjtvQkFBRUMsT0FBTztnQkFBcUQsR0FDOUQ7b0JBQUVDLFFBQVE7Z0JBQUk7WUFFdEI7UUFDSjtRQUVBLHdCQUF3QjtRQUN4QixNQUFNTyxNQUFNLElBQUlDO1FBQ2hCLE1BQU1DLGFBQWFGLElBQUlHLGtCQUFrQixDQUFDLFNBQVM7WUFBRUMsU0FBUztRQUFPLEdBQUdDLFdBQVc7UUFFbkYsZ0NBQWdDO1FBQ2hDLE1BQU1DLGFBQWEsTUFBTXJCLHVDQUFFQSxDQUFDc0IsU0FBUyxDQUFDQyxRQUFRLENBQUM7WUFDM0ND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QUFPVixxREFBWUEsQ0FBQ1MsSUFBSSxDQUNwQjtZQUFFQyxPQUFPO1FBQXdCLEdBQ2pDO1lBQUVDLFFBQVE7UUFBSTtJQUV0QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Nob29sLXRpbWV0YWJsZS1tYW5hZ2VtZW50Ly4vc3JjL2FwcC9hcGkvdGVhY2hlci9zdGF0aXN0aWNzL3JvdXRlLnRzP2VmNTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJ1xyXG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvbGliL2F1dGgnXHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnQC9saWIvZGInXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKVxyXG5cclxuICAgICAgICBpZiAoIXNlc3Npb24gfHwgKHNlc3Npb24udXNlci5yb2xlICE9PSAnVEVBQ0hFUicgJiYgc2Vzc2lvbi51c2VyLnJvbGUgIT09ICdUUkFJTkVSJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICAgICAgeyBlcnJvcjogJ1VuYXV0aG9yaXplZCAtIFRlYWNoZXIvVHJhaW5lciByb2xlIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCB0ZWFjaGVyIElEIGZyb20gc2Vzc2lvbiBvciBxdWVyeSBwYXJhbWV0ZXJcclxuICAgICAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcclxuICAgICAgICBjb25zdCB0ZWFjaGVySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCd0ZWFjaGVySWQnKSB8fCBzZXNzaW9uLnVzZXIuaWRcclxuXHJcbiAgICAgICAgLy8gRW5zdXJlIHRlYWNoZXJzIGNhbiBvbmx5IGFjY2VzcyB0aGVpciBvd24gc3RhdGlzdGljcyB1bmxlc3MgdGhleSdyZSBhZG1pblxyXG4gICAgICAgIGlmIChzZXNzaW9uLnVzZXIucm9sZSA9PT0gJ1RFQUNIRVInIHx8IHNlc3Npb24udXNlci5yb2xlID09PSAnVFJBSU5FUicpIHtcclxuICAgICAgICAgICAgaWYgKHRlYWNoZXJJZCAhPT0gc2Vzc2lvbi51c2VyLmlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICAgICAgeyBlcnJvcjogJ1VuYXV0aG9yaXplZCAtIENhbiBvbmx5IGFjY2VzcyB5b3VyIG93biBzdGF0aXN0aWNzJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA0MDMgfVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHZXQgY3VycmVudCBkYXRlIGluZm9cclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXHJcbiAgICAgICAgY29uc3QgY3VycmVudERheSA9IG5vdy50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgeyB3ZWVrZGF5OiAnbG9uZycgfSkudG9VcHBlckNhc2UoKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEdldCB0aW1ldGFibGVzIGZvciBzdGF0aXN0aWNzXHJcbiAgICAgICAgY29uc3QgdGltZXRhYmxlcyA9IGF3YWl0IGRiLnRpbWV0YWJsZS5maW5kTWFueSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgICAgICB0ZWFjaGVySWQ6IHRlYWNoZXJJZCxcclxuICAgICAgICAgICAgICAgIHNjaG9vbElkOiBzZXNzaW9uLnVzZXIuc2Nob29sSWQgfHwgJydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgICAgICAgdGltZVNsb3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJpb2Q6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQnJlYWs6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY2xhc3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aW1ldGFibGUgc3RhdGlzdGljc1xyXG4gICAgICAgIGNvbnN0IHRvdGFsTGVzc29ucyA9IHRpbWV0YWJsZXMubGVuZ3RoXHJcbiAgICAgICAgY29uc3QgdGVhY2hpbmdMZXNzb25zID0gdGltZXRhYmxlcy5maWx0ZXIodCA9PiAhdC50aW1lU2xvdC5pc0JyZWFrKS5sZW5ndGhcclxuICAgICAgICBjb25zdCBicmVha3MgPSB0aW1ldGFibGVzLmZpbHRlcih0ID0+IHQudGltZVNsb3QuaXNCcmVhaykubGVuZ3RoXHJcbiAgICAgICAgY29uc3QgdW5pcXVlRGF5cyA9IG5ldyBTZXQodGltZXRhYmxlcy5tYXAodCA9PiB0LnRpbWVTbG90LmRheSkpLnNpemVcclxuICAgICAgICBjb25zdCB1bmlxdWVDbGFzc2VzID0gbmV3IFNldCh0aW1ldGFibGVzLm1hcCh0ID0+IHQuY2xhc3NJZCkpLnNpemVcclxuICAgICAgICBjb25zdCBtYXhQZXJpb2QgPSBNYXRoLm1heCguLi50aW1ldGFibGVzLm1hcCh0ID0+IHQudGltZVNsb3QucGVyaW9kKSwgMClcclxuXHJcbiAgICAgICAgLy8gVG9kYXkncyBsZXNzb25zXHJcbiAgICAgICAgY29uc3QgdG9kYXlMZXNzb25zID0gdGltZXRhYmxlcy5maWx0ZXIodCA9PiB0LnRpbWVTbG90LmRheSA9PT0gY3VycmVudERheSAmJiAhdC50aW1lU2xvdC5pc0JyZWFrKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFdlZWtseSBsZXNzb24gZGlzdHJpYnV0aW9uXHJcbiAgICAgICAgY29uc3QgZGF5T3JkZXIgPSBbJ01PTkRBWScsICdUVUVTREFZJywgJ1dFRE5FU0RBWScsICdUSFVSU0RBWScsICdGUklEQVknLCAnU0FUVVJEQVknXVxyXG4gICAgICAgIGNvbnN0IGxlc3NvbnNQZXJEYXkgPSBkYXlPcmRlci5tYXAoZGF5ID0+ICh7XHJcbiAgICAgICAgICAgIGRheSxcclxuICAgICAgICAgICAgY291bnQ6IHRpbWV0YWJsZXMuZmlsdGVyKHQgPT4gdC50aW1lU2xvdC5kYXkgPT09IGRheSAmJiAhdC50aW1lU2xvdC5pc0JyZWFrKS5sZW5ndGhcclxuICAgICAgICB9KSlcclxuXHJcbiAgICAgICAgLy8gR2V0IGFzc2lnbm1lbnQgc3RhdGlzdGljc1xyXG4gICAgICAgIGNvbnN0IHN1YmplY3RBc3NpZ25tZW50cyA9IGF3YWl0IGRiLnRlYWNoZXJTdWJqZWN0LmNvdW50KHtcclxuICAgICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgICAgIHRlYWNoZXJJZDogdGVhY2hlcklkLFxyXG4gICAgICAgICAgICAgICAgdGVhY2hlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjaG9vbElkOiBzZXNzaW9uLnVzZXIuc2Nob29sSWQgfHwgJydcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGNvbnN0IG1vZHVsZUFzc2lnbm1lbnRzID0gYXdhaXQgZGIudHJhaW5lck1vZHVsZS5jb3VudCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgICAgICB0cmFpbmVySWQ6IHRlYWNoZXJJZCxcclxuICAgICAgICAgICAgICAgIHRyYWluZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBzY2hvb2xJZDogc2Vzc2lvbi51c2VyLnNjaG9vbElkIHx8ICcnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCBjbGFzc1N1YmplY3RBc3NpZ25tZW50cyA9IGF3YWl0IGRiLnRlYWNoZXJDbGFzc1N1YmplY3QuY291bnQoe1xyXG4gICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgICAgdGVhY2hlcklkOiB0ZWFjaGVySWQsXHJcbiAgICAgICAgICAgICAgICBzY2hvb2xJZDogc2Vzc2lvbi51c2VyLnNjaG9vbElkIHx8ICcnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCBjbGFzc01vZHVsZUFzc2lnbm1lbnRzID0gYXdhaXQgZGIudHJhaW5lckNsYXNzTW9kdWxlLmNvdW50KHtcclxuICAgICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgICAgIHRyYWluZXJJZDogdGVhY2hlcklkLFxyXG4gICAgICAgICAgICAgICAgc2Nob29sSWQ6IHNlc3Npb24udXNlci5zY2hvb2xJZCB8fCAnJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHdvcmtsb2FkIG1ldHJpY3NcclxuICAgICAgICBjb25zdCBhdmVyYWdlTGVzc29uc1BlckRheSA9IHVuaXF1ZURheXMgPiAwID8gTWF0aC5yb3VuZCgodGVhY2hpbmdMZXNzb25zIC8gdW5pcXVlRGF5cykgKiAxMCkgLyAxMCA6IDBcclxuICAgICAgICBjb25zdCB0b3RhbEFzc2lnbm1lbnRzID0gc3ViamVjdEFzc2lnbm1lbnRzICsgbW9kdWxlQXNzaWdubWVudHNcclxuICAgICAgICBjb25zdCB0b3RhbENsYXNzQXNzaWdubWVudHMgPSBjbGFzc1N1YmplY3RBc3NpZ25tZW50cyArIGNsYXNzTW9kdWxlQXNzaWdubWVudHNcclxuXHJcbiAgICAgICAgLy8gR2V0IHRlYWNoZXIncyBhdmFpbGFiaWxpdHkgc2V0dGluZ3NcclxuICAgICAgICBjb25zdCB0ZWFjaGVyID0gYXdhaXQgZGIudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgICAgIGlkOiB0ZWFjaGVySWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgICBtYXhXZWVrbHlIb3VyczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHVuYXZhaWxhYmxlRGF5czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHVuYXZhaWxhYmxlUGVyaW9kczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlYWNoaW5nU3RyZWFtczogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHV0aWxpemF0aW9uIHBlcmNlbnRhZ2VcclxuICAgICAgICBjb25zdCBtYXhIb3VycyA9IHRlYWNoZXI/Lm1heFdlZWtseUhvdXJzIHx8IDQwXHJcbiAgICAgICAgY29uc3QgZXN0aW1hdGVkSG91cnMgPSBNYXRoLnJvdW5kKCh0ZWFjaGluZ0xlc3NvbnMgKiAwLjc1KSAqIDEwKSAvIDEwIC8vIEFzc3VtaW5nIH40NSBtaW4gcGVyIGxlc3NvblxyXG4gICAgICAgIGNvbnN0IHV0aWxpemF0aW9uUGVyY2VudGFnZSA9IG1heEhvdXJzID4gMCA/IE1hdGgucm91bmQoKGVzdGltYXRlZEhvdXJzIC8gbWF4SG91cnMpICogMTAwKSA6IDBcclxuXHJcbiAgICAgICAgLy8gR2V0IHJlY2VudCBhY3Rpdml0eSAobGFzdCA1IHRpbWV0YWJsZXMgY3JlYXRlZC91cGRhdGVkKVxyXG4gICAgICAgIGNvbnN0IHJlY2VudFRpbWV0YWJsZXMgPSBhd2FpdCBkYi50aW1ldGFibGUuZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgICAgdGVhY2hlcklkOiB0ZWFjaGVySWQsXHJcbiAgICAgICAgICAgICAgICBzY2hvb2xJZDogc2Vzc2lvbi51c2VyLnNjaG9vbElkIHx8ICcnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9yZGVyQnk6IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogJ2Rlc2MnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRha2U6IDUsXHJcbiAgICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjbGFzczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRpbWVTbG90OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyaW9kOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY29uc3Qgc3RhdGlzdGljcyA9IHtcclxuICAgICAgICAgICAgLy8gVGltZXRhYmxlIFN0YXRpc3RpY3NcclxuICAgICAgICAgICAgdG90YWxMZXNzb25zLFxyXG4gICAgICAgICAgICB0ZWFjaGluZ0xlc3NvbnMsXHJcbiAgICAgICAgICAgIGJyZWFrcyxcclxuICAgICAgICAgICAgdW5pcXVlRGF5cyxcclxuICAgICAgICAgICAgdW5pcXVlQ2xhc3NlcyxcclxuICAgICAgICAgICAgbWF4UGVyaW9kLFxyXG4gICAgICAgICAgICB0b2RheUxlc3NvbnM6IHRvZGF5TGVzc29ucy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGF2ZXJhZ2VMZXNzb25zUGVyRGF5LFxyXG4gICAgICAgICAgICB1dGlsaXphdGlvblBlcmNlbnRhZ2UsXHJcblxyXG4gICAgICAgICAgICAvLyBBc3NpZ25tZW50IFN0YXRpc3RpY3NcclxuICAgICAgICAgICAgc3ViamVjdEFzc2lnbm1lbnRzLFxyXG4gICAgICAgICAgICBtb2R1bGVBc3NpZ25tZW50cyxcclxuICAgICAgICAgICAgdG90YWxBc3NpZ25tZW50cyxcclxuICAgICAgICAgICAgY2xhc3NTdWJqZWN0QXNzaWdubWVudHMsXHJcbiAgICAgICAgICAgIGNsYXNzTW9kdWxlQXNzaWdubWVudHMsXHJcbiAgICAgICAgICAgIHRvdGFsQ2xhc3NBc3NpZ25tZW50cyxcclxuXHJcbiAgICAgICAgICAgIC8vIFdvcmtsb2FkIEluZm9ybWF0aW9uXHJcbiAgICAgICAgICAgIG1heFdlZWtseUhvdXJzOiB0ZWFjaGVyPy5tYXhXZWVrbHlIb3VycyB8fCA0MCxcclxuICAgICAgICAgICAgZXN0aW1hdGVkV2Vla2x5SG91cnM6IGVzdGltYXRlZEhvdXJzLFxyXG4gICAgICAgICAgICB0ZWFjaGluZ1N0cmVhbXM6IHRlYWNoZXI/LnRlYWNoaW5nU3RyZWFtcyB8fCAnUFJJTUFSWScsXHJcblxyXG4gICAgICAgICAgICAvLyBEaXN0cmlidXRpb24gRGF0YVxyXG4gICAgICAgICAgICBsZXNzb25zUGVyRGF5LFxyXG4gICAgICAgICAgICByZWNlbnRBY3Rpdml0eTogcmVjZW50VGltZXRhYmxlcy5tYXAodCA9PiAoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IHQuaWQsXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHQuY2xhc3MubmFtZSxcclxuICAgICAgICAgICAgICAgIGRheTogdC50aW1lU2xvdC5kYXksXHJcbiAgICAgICAgICAgICAgICBwZXJpb2Q6IHQudGltZVNsb3QucGVyaW9kLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiB0LnVwZGF0ZWRBdFxyXG4gICAgICAgICAgICB9KSksXHJcblxyXG4gICAgICAgICAgICAvLyBBdmFpbGFiaWxpdHkgSW5mb3JtYXRpb25cclxuICAgICAgICAgICAgdW5hdmFpbGFibGVEYXlzOiB0ZWFjaGVyPy51bmF2YWlsYWJsZURheXMgPyBKU09OLnBhcnNlKHRlYWNoZXIudW5hdmFpbGFibGVEYXlzKSA6IFtdLFxyXG4gICAgICAgICAgICB1bmF2YWlsYWJsZVBlcmlvZHM6IHRlYWNoZXI/LnVuYXZhaWxhYmxlUGVyaW9kcyA/IEpTT04ucGFyc2UodGVhY2hlci51bmF2YWlsYWJsZVBlcmlvZHMpIDogW11cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIHN1bW1hcnkgZm9yIGRhc2hib2FyZFxyXG4gICAgICAgIGNvbnN0IHN1bW1hcnkgPSB7XHJcbiAgICAgICAgICAgIHN0YXR1czogdXRpbGl6YXRpb25QZXJjZW50YWdlIDwgNzAgPyAnTGlnaHQgTG9hZCcgOiBcclxuICAgICAgICAgICAgICAgICAgIHV0aWxpemF0aW9uUGVyY2VudGFnZSA+IDkwID8gJ0hlYXZ5IExvYWQnIDogJ0JhbGFuY2VkJyxcclxuICAgICAgICAgICAgd2Vla2x5R29hbDogYCR7ZXN0aW1hdGVkSG91cnN9LyR7bWF4SG91cnN9IGhvdXJzYCxcclxuICAgICAgICAgICAgbmV4dENsYXNzOiB0b2RheUxlc3NvbnMubGVuZ3RoID4gMCA/IFxyXG4gICAgICAgICAgICAgICAgYFRvZGF5OiAke3RvZGF5TGVzc29ucy5sZW5ndGh9IGxlc3NvbnNgIDogXHJcbiAgICAgICAgICAgICAgICAnTm8gY2xhc3NlcyB0b2RheScsXHJcbiAgICAgICAgICAgIGFzc2lnbm1lbnRzOiBgJHt0b3RhbEFzc2lnbm1lbnRzfSBzdWJqZWN0cy9tb2R1bGVzLCAke3RvdGFsQ2xhc3NBc3NpZ25tZW50c30gY2xhc3MgYXNzaWdubWVudHNgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICBzdGF0aXN0aWNzLFxyXG4gICAgICAgICAgICBzdW1tYXJ5LFxyXG4gICAgICAgICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RlYWNoZXIgc3RhdGlzdGljcyBmZXRjaCBlcnJvcjonLCBlcnJvcilcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXHJcbiAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICAgIClcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiYXV0aE9wdGlvbnMiLCJkYiIsIkdFVCIsInJlcXVlc3QiLCJzZXNzaW9uIiwidXNlciIsInJvbGUiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJ0ZWFjaGVySWQiLCJnZXQiLCJpZCIsIm5vdyIsIkRhdGUiLCJjdXJyZW50RGF5IiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwid2Vla2RheSIsInRvVXBwZXJDYXNlIiwidGltZXRhYmxlcyIsInRpbWV0YWJsZSIsImZpbmRNYW55Iiwid2hlcmUiLCJzY2hvb2xJZCIsImluY2x1ZGUiLCJ0aW1lU2xvdCIsInNlbGVjdCIsImRheSIsInBlcmlvZCIsImlzQnJlYWsiLCJjbGFzcyIsIm5hbWUiLCJ0b3RhbExlc3NvbnMiLCJsZW5ndGgiLCJ0ZWFjaGluZ0xlc3NvbnMiLCJmaWx0ZXIiLCJ0IiwiYnJlYWtzIiwidW5pcXVlRGF5cyIsIlNldCIsIm1hcCIsInNpemUiLCJ1bmlxdWVDbGFzc2VzIiwiY2xhc3NJZCIsIm1heFBlcmlvZCIsIk1hdGgiLCJtYXgiLCJ0b2RheUxlc3NvbnMiLCJkYXlPcmRlciIsImxlc3NvbnNQZXJEYXkiLCJjb3VudCIsInN1YmplY3RBc3NpZ25tZW50cyIsInRlYWNoZXJTdWJqZWN0IiwidGVhY2hlciIsIm1vZHVsZUFzc2lnbm1lbnRzIiwidHJhaW5lck1vZHVsZSIsInRyYWluZXJJZCIsInRyYWluZXIiLCJjbGFzc1N1YmplY3RBc3NpZ25tZW50cyIsInRlYWNoZXJDbGFzc1N1YmplY3QiLCJjbGFzc01vZHVsZUFzc2lnbm1lbnRzIiwidHJhaW5lckNsYXNzTW9kdWxlIiwiYXZlcmFnZUxlc3NvbnNQZXJEYXkiLCJyb3VuZCIsInRvdGFsQXNzaWdubWVudHMiLCJ0b3RhbENsYXNzQXNzaWdubWVudHMiLCJmaW5kVW5pcXVlIiwibWF4V2Vla2x5SG91cnMiLCJ1bmF2YWlsYWJsZURheXMiLCJ1bmF2YWlsYWJsZVBlcmlvZHMiLCJ0ZWFjaGluZ1N0cmVhbXMiLCJtYXhIb3VycyIsImVzdGltYXRlZEhvdXJzIiwidXRpbGl6YXRpb25QZXJjZW50YWdlIiwicmVjZW50VGltZXRhYmxlcyIsIm9yZGVyQnkiLCJ1cGRhdGVkQXQiLCJ0YWtlIiwic3RhdGlzdGljcyIsImVzdGltYXRlZFdlZWtseUhvdXJzIiwicmVjZW50QWN0aXZpdHkiLCJjbGFzc05hbWUiLCJKU09OIiwicGFyc2UiLCJzdW1tYXJ5Iiwid2Vla2x5R29hbCIsIm5leHRDbGFzcyIsImFzc2lnbm1lbnRzIiwibGFzdFVwZGF0ZWQiLCJ0b0lTT1N0cmluZyIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/teacher/statistics/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// @ts-ignore - Temporarily bypassing type checking for auth configuration\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            // @ts-ignore\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                const user = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    },\n                    include: {\n                        school: true\n                    }\n                });\n                if (!user || !user.isActive) {\n                    return null;\n                }\n                const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().compare(credentials.password, user.password);\n                if (!isPasswordValid) {\n                    return null;\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    role: user.role,\n                    schoolId: user.schoolId,\n                    schoolName: user.school?.name || \"\",\n                    teachingStreams: user.teachingStreams,\n                    maxWeeklyHours: user.maxWeeklyHours\n                };\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\"\n    },\n    callbacks: {\n        // @ts-ignore\n        async jwt ({ token, user }) {\n            if (user) {\n                token.role = user.role;\n                token.schoolId = user.schoolId;\n                token.schoolName = user.schoolName;\n                token.teachingStreams = user.teachingStreams;\n                token.maxWeeklyHours = user.maxWeeklyHours;\n            }\n            return token;\n        },\n        // @ts-ignore\n        async session ({ session, token }) {\n            if (token) {\n                session.user.id = token.sub;\n                session.user.role = token.role;\n                session.user.schoolId = token.schoolId;\n                session.user.schoolName = token.schoolName;\n                // @ts-ignore\n                session.user.teachingStreams = token.teachingStreams;\n                // @ts-ignore\n                session.user.maxWeeklyHours = token.maxWeeklyHours;\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDaUU7QUFDcEM7QUFDQTtBQUU3QiwwRUFBMEU7QUFDbkUsTUFBTUcsY0FBK0I7SUFDMUNDLFdBQVc7UUFDVEosMkVBQW1CQSxDQUFDO1lBQ2xCSyxNQUFNO1lBQ05DLGFBQWE7Z0JBQ1hDLE9BQU87b0JBQUVDLE9BQU87b0JBQVNDLE1BQU07Z0JBQVE7Z0JBQ3ZDQyxVQUFVO29CQUFFRixPQUFPO29CQUFZQyxNQUFNO2dCQUFXO1lBQ2xEO1lBQ0EsYUFBYTtZQUNiLE1BQU1FLFdBQVVMLFdBQVc7Z0JBQ3pCLElBQUksQ0FBQ0EsYUFBYUMsU0FBUyxDQUFDRCxhQUFhSSxVQUFVO29CQUNqRCxPQUFPO2dCQUNUO2dCQUVBLE1BQU1FLE9BQU8sTUFBTVgsdUNBQUVBLENBQUNXLElBQUksQ0FBQ0MsVUFBVSxDQUFDO29CQUNsQ0MsT0FBTzt3QkFDSFAsT0FBT0QsWUFBWUMsS0FBSztvQkFDNUI7b0JBQ0FRLFNBQVM7d0JBQ0xDLFFBQVE7b0JBQ1o7Z0JBQ0o7Z0JBRUEsSUFBSSxDQUFDSixRQUFRLENBQUNBLEtBQUtLLFFBQVEsRUFBRTtvQkFDekIsT0FBTztnQkFDWDtnQkFFQSxNQUFNQyxrQkFBa0IsTUFBTWhCLHVEQUFjLENBQzFDSSxZQUFZSSxRQUFRLEVBQ3BCRSxLQUFLRixRQUFRO2dCQUdmLElBQUksQ0FBQ1EsaUJBQWlCO29CQUNwQixPQUFPO2dCQUNUO2dCQUVBLE9BQU87b0JBQ0xFLElBQUlSLEtBQUtRLEVBQUU7b0JBQ1hiLE9BQU9LLEtBQUtMLEtBQUs7b0JBQ2pCRixNQUFNTyxLQUFLUCxJQUFJO29CQUNmZ0IsTUFBTVQsS0FBS1MsSUFBSTtvQkFDZkMsVUFBVVYsS0FBS1UsUUFBUTtvQkFDdkJDLFlBQVlYLEtBQUtJLE1BQU0sRUFBRVgsUUFBUTtvQkFDakNtQixpQkFBaUJaLEtBQUtZLGVBQWU7b0JBQ3JDQyxnQkFBZ0JiLEtBQUthLGNBQWM7Z0JBQ3JDO1lBQ0Y7UUFDRjtLQUNEO0lBQ0RDLFNBQVM7UUFDUEMsVUFBVTtJQUNaO0lBQ0FDLFdBQVc7UUFDVCxhQUFhO1FBQ2IsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVsQixJQUFJLEVBQUU7WUFDdkIsSUFBSUEsTUFBTTtnQkFDUmtCLE1BQU1ULElBQUksR0FBR1QsS0FBS1MsSUFBSTtnQkFDdEJTLE1BQU1SLFFBQVEsR0FBR1YsS0FBS1UsUUFBUTtnQkFDOUJRLE1BQU1QLFVBQVUsR0FBR1gsS0FBS1csVUFBVTtnQkFDbENPLE1BQU1OLGVBQWUsR0FBR1osS0FBS1ksZUFBZTtnQkFDNUNNLE1BQU1MLGNBQWMsR0FBR2IsS0FBS2EsY0FBYztZQUM1QztZQUNBLE9BQU9LO1FBQ1Q7UUFDQSxhQUFhO1FBQ2IsTUFBTUosU0FBUSxFQUFFQSxPQUFPLEVBQUVJLEtBQUssRUFBRTtZQUM5QixJQUFJQSxPQUFPO2dCQUNUSixRQUFRZCxJQUFJLENBQUNRLEVBQUUsR0FBR1UsTUFBTUMsR0FBRztnQkFDM0JMLFFBQVFkLElBQUksQ0FBQ1MsSUFBSSxHQUFHUyxNQUFNVCxJQUFJO2dCQUM5QkssUUFBUWQsSUFBSSxDQUFDVSxRQUFRLEdBQUdRLE1BQU1SLFFBQVE7Z0JBQ3RDSSxRQUFRZCxJQUFJLENBQUNXLFVBQVUsR0FBR08sTUFBTVAsVUFBVTtnQkFDMUMsYUFBYTtnQkFDYkcsUUFBUWQsSUFBSSxDQUFDWSxlQUFlLEdBQUdNLE1BQU1OLGVBQWU7Z0JBQ3BELGFBQWE7Z0JBQ2JFLFFBQVFkLElBQUksQ0FBQ2EsY0FBYyxHQUFHSyxNQUFNTCxjQUFjO1lBQ3BEO1lBQ0EsT0FBT0M7UUFDVDtJQUNGO0lBQ0FNLE9BQU87UUFDTEMsUUFBUTtJQUNWO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NjaG9vbC10aW1ldGFibGUtbWFuYWdlbWVudC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gJ25leHQtYXV0aCdcclxuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscydcclxuaW1wb3J0IHsgZGIgfSBmcm9tICdAL2xpYi9kYidcclxuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcydcclxuXHJcbi8vIEB0cy1pZ25vcmUgLSBUZW1wb3JhcmlseSBieXBhc3NpbmcgdHlwZSBjaGVja2luZyBmb3IgYXV0aCBjb25maWd1cmF0aW9uXHJcbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XHJcbiAgICAgIG5hbWU6ICdjcmVkZW50aWFscycsXHJcbiAgICAgIGNyZWRlbnRpYWxzOiB7XHJcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6ICdFbWFpbCcsIHR5cGU6ICdlbWFpbCcgfSxcclxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogJ1Bhc3N3b3JkJywgdHlwZTogJ3Bhc3N3b3JkJyB9XHJcbiAgICAgIH0sXHJcbiAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uZW1haWwgfHwgIWNyZWRlbnRpYWxzPy5wYXNzd29yZCkge1xyXG4gICAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgICAgICAgIHNjaG9vbDogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKCF1c2VyIHx8ICF1c2VyLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShcclxuICAgICAgICAgIGNyZWRlbnRpYWxzLnBhc3N3b3JkLFxyXG4gICAgICAgICAgdXNlci5wYXNzd29yZFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpIHtcclxuICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcclxuICAgICAgICAgIHNjaG9vbElkOiB1c2VyLnNjaG9vbElkLFxyXG4gICAgICAgICAgc2Nob29sTmFtZTogdXNlci5zY2hvb2w/Lm5hbWUgfHwgJycsXHJcbiAgICAgICAgICB0ZWFjaGluZ1N0cmVhbXM6IHVzZXIudGVhY2hpbmdTdHJlYW1zLFxyXG4gICAgICAgICAgbWF4V2Vla2x5SG91cnM6IHVzZXIubWF4V2Vla2x5SG91cnNcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgXSxcclxuICBzZXNzaW9uOiB7XHJcbiAgICBzdHJhdGVneTogJ2p3dCdcclxuICB9LFxyXG4gIGNhbGxiYWNrczoge1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xyXG4gICAgICBpZiAodXNlcikge1xyXG4gICAgICAgIHRva2VuLnJvbGUgPSB1c2VyLnJvbGVcclxuICAgICAgICB0b2tlbi5zY2hvb2xJZCA9IHVzZXIuc2Nob29sSWRcclxuICAgICAgICB0b2tlbi5zY2hvb2xOYW1lID0gdXNlci5zY2hvb2xOYW1lXHJcbiAgICAgICAgdG9rZW4udGVhY2hpbmdTdHJlYW1zID0gdXNlci50ZWFjaGluZ1N0cmVhbXNcclxuICAgICAgICB0b2tlbi5tYXhXZWVrbHlIb3VycyA9IHVzZXIubWF4V2Vla2x5SG91cnNcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdG9rZW5cclxuICAgIH0sXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xyXG4gICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5zdWIhXHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSB0b2tlbi5yb2xlXHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLnNjaG9vbElkID0gdG9rZW4uc2Nob29sSWRcclxuICAgICAgICBzZXNzaW9uLnVzZXIuc2Nob29sTmFtZSA9IHRva2VuLnNjaG9vbE5hbWVcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLnRlYWNoaW5nU3RyZWFtcyA9IHRva2VuLnRlYWNoaW5nU3RyZWFtc1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBzZXNzaW9uLnVzZXIubWF4V2Vla2x5SG91cnMgPSB0b2tlbi5tYXhXZWVrbHlIb3Vyc1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZXNzaW9uXHJcbiAgICB9XHJcbiAgfSxcclxuICBwYWdlczoge1xyXG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJ1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiZGIiLCJiY3J5cHQiLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaW5jbHVkZSIsInNjaG9vbCIsImlzQWN0aXZlIiwiaXNQYXNzd29yZFZhbGlkIiwiY29tcGFyZSIsImlkIiwicm9sZSIsInNjaG9vbElkIiwic2Nob29sTmFtZSIsInRlYWNoaW5nU3RyZWFtcyIsIm1heFdlZWtseUhvdXJzIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwiY2FsbGJhY2tzIiwiand0IiwidG9rZW4iLCJzdWIiLCJwYWdlcyIsInNpZ25JbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst db = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = db;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLEtBQUtGLGdCQUFnQkcsTUFBTSxJQUFJLElBQUlKLHdEQUFZQSxHQUFFO0FBRTlELElBQUlLLElBQXlCLEVBQWNKLGdCQUFnQkcsTUFBTSxHQUFHRCIsInNvdXJjZXMiOlsid2VicGFjazovL3NjaG9vbC10aW1ldGFibGUtbWFuYWdlbWVudC8uL3NyYy9saWIvZGIudHM/OWU0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcclxuXHJcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XHJcbiAgICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGIgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKVxyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBkYiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwiZGIiLCJwcmlzbWEiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/bcryptjs","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fteacher%2Fstatistics%2Froute&page=%2Fapi%2Fteacher%2Fstatistics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fteacher%2Fstatistics%2Froute.ts&appDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=c%3A%5CUsers%5CTRAINER%201%5CDesktop%5CWEB%20DEVELOP%5CAUTOMATIC%20SCHOOL%20TIMETABLE%20MANAGEMENT%20SYSTEM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();